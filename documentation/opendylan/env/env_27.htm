<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997) -->
<HEAD>
<LINK REL=TOP HREF="env_1.htm">
<LINK REL=UP HREF="env_25.htm">
<LINK REL=PREV HREF="env_26.htm">
<LINK REL=NEXT HREF="env_28.htm">
<TITLE>2.3.2   Browsing local variables </TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997)">
</HEAD>
<BODY BGCOLOR="#FEFEF2" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<DIV>
<A NAME=HEADING27></A>

<DIV>
<P><A HREF="env_28.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="env_26.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="env_25.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A> <A HREF="env_1.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="env_2.htm"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="env_206.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>
<P>2.3   Problems at run time </P>

</DIV>
<A NAME=HEADING27-0></A>
<H1>2.3.2   <A NAME=MARKER-9-239></A>Browsing local variables </H1>
<P>In this section we use the Functional Developer browser to help confirm the cause of the unhandled Dylan exception.</P>
<DL>
<DT><DD>1.  Expand the call frame for <CODE>reversi-board-write-data</CODE>.
</DL>
<P>We can now see the values of the local variables in this frame. The arguments are listed first: <CODE>board</CODE> and <CODE>stream</CODE>, followed by the <CODE>squares</CODE> sequence and iteration variable <CODE>square</CODE>.</P>
<P> <IMG ALIGN=TOP SRC=locvars.gif></P>
<P>Figure 2.6   <A NAME=MARKER-10-240></A>Local variables in the <CODE>reversi-board-write-data</CODE> call frame.</P>
<P>The notation</P>
<PRE>
board = {&lt;reversi-board&gt;}
<P></P>
</PRE>
<P>means that <CODE>board</CODE> is an instance of <CODE>&lt;reversi-board&gt;</CODE>--an actual instance in the paused application. The curly braces mean that this is an instance of the class rather than the class definition itself. </P>
<P>We can look at this <CODE>&lt;reversi-board&gt;</CODE> instance in the <I>browser</I>, which allows us to examine the contents and properties of all kinds of things we come across in Functional Developer.</P>
<DL>
<DT><DD>2.  Double-click on the <CODE>board</CODE> item. 
<DT><DD>The browser appears.
</DL>
<P> <IMG ALIGN=TOP SRC=firstbrowse.gif></P>
<P>Figure 2.7   <A NAME=MARKER-10-241></A>Browsing an instance of <CODE>&lt;reversi-board&gt;</CODE>.</P>
<P>The browser shows us in its Object field that we are browsing an instance of <CODE>&lt;reversi-board&gt;</CODE>. Like the debugger, the browser uses the curly braces notation to depict an <I>instance</I> of a class as opposed to its definition.</P>
<P>The browser presents information in property pages. In the page selected by default, we see the names of the slots in the instance and the values they had when the exception occurred. The property pages that the browser shows depend on what it is browsing; the set of pages for a class definition is quite different from that for a method definition, for example. </P>
<P>However, the browser always provides a General page. The General page gives an overview of the currently browsed object.</P>
<DL>
<DT><DD>3.  Choose the General page.
</DL>
<P>The fields on the General page for our <CODE>&lt;reversi-board&gt;</CODE> value tell us that it is an instance of type <CODE>&lt;reversi-board&gt;</CODE> and that it has two slots. The third field, Source, is labeled "n/a" for "not applicable". The Source field shows a source file name for anything the compiler saw during compilation, such as a definition. We are browsing an instance, not a compiler record, so it is not relevant to associate the instance with a source location. For more on the browser's distinction between run-time and compile-time objects, see <A HREF="env_86.htm#MARKER-9-392">"Browsing a project in source and run-time contexts" on page 82</A>. </P>
<DL>
<DT><DD>4.  Choose the Contents page.
</DL>
<P>If we double-click on items on the Contents page, the browser moves on to browsing them. </P>
<DL>
<DT><DD>5.  Double-click on the <CODE>reversi-board-squares</CODE> item.
</DL>
<P> <A NAME=MARKER-10-242></A><IMG ALIGN=TOP SRC=collsquares.gif></P>
<P>Figure 2.8   Browsing the elements of a collection.</P>
<P>Now we can see the elements of the <CODE>reversi-board-squares</CODE> collection. </P>
<DL>
<DT><DD>6.  Click on the Back (<IMG ALIGN=TOP SRC=brow-left.gif>) button to return to browsing <CODE>board</CODE>, the <CODE>&lt;reversi-board&gt;</CODE> instance.
</DL>
<P>Going back to the bug we are tracking down, two more useful pieces of information have emerged from seeing the <CODE>&lt;reversi-board&gt;</CODE> instance in the browser.</P>
<P>First, we can tell from the Contents page, which shows the slot values in the instance, that the call to <CODE>reversi-board-squares</CODE> in <CODE>reversi-board-write-data</CODE>, below, is clearly just a call to the default accessor on the <CODE>&lt;reversi-board&gt;</CODE> slot of the same name. </P>
<PRE>
define method reversi-board-write-data
    (board :: &lt;reversi-board&gt;, stream :: &lt;file-stream&gt;)
  =&gt; ()
   let squares = reversi-board-squares(board);
   for (square from 0 below size(squares))
     reversi-square-write-data(squares[square], stream);
   end for;
end method reversi-board-write-data;
<P></P>
</PRE>
<P>Second, we can see that the <CODE>reversi-board-squares</CODE> slot holds a sequence, and that the sequence does not have an <CODE>&lt;integer&gt;</CODE> element type.</P>
<P>So we still do not know where the integer that caused the exception came from. However, we have yet to check what goes on in <CODE>reversi-square-write-data</CODE>; perhaps that method is converting the elements in the <CODE>reversi-board-squares</CODE> sequence into integers?</P>

</DIV>

<DIV>

<DIV>

<!-- TOC -->

</DIV>

<HR>
<ADDRESS>Getting Started with Functional Developer - 31 MAR 2000</ADDRESS>
<P><A HREF="env_28.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="env_26.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="env_25.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A> <A HREF="env_1.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="env_2.htm"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="env_206.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>

</DIV>
</BODY>
</HTML>
