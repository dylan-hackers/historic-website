<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997) -->
<HEAD>
<LINK REL=TOP HREF="corba_1.htm">
<LINK REL=UP HREF="corba_70.htm">
<LINK REL=PREV HREF="corba_72.htm">
<LINK REL=NEXT HREF="corba_74.htm">
<TITLE>6.5.3   Implementing the servant classes</TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997)">
</HEAD>
<BODY BGCOLOR="#FEFEF2" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<DIV>
<A NAME=HEADING73></A>

<DIV>
<P><A HREF="corba_74.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="corba_72.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="corba_70.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A> <A HREF="corba_1.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="corba_2.htm"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="corb_206.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>
<P>6.5   Requirements for implementing the bank server</P>

</DIV>
<A NAME=HEADING73-0></A>
<H1>6.5.3   Implementing the servant classes</H1>
<P>The <A NAME=MARKER-2-235></A>Bank-Skeletons library defines three abstract servant classes:</P>
<PRE>
BankingDemo&lt;account-servant&gt;
BankingDemo/&lt;checkingAccount-servant&gt; 
BankingDemo/&lt;bank-servant&gt; 
<P></P>
</PRE>
<P>These classes correspond to the IDL interfaces <CODE>account</CODE>, <CODE>checkingAccount</CODE> and <CODE>bank</CODE>. </P>
<P>The class <CODE>BankingDemo/&lt;checkingAccount-servant&gt;</CODE> is defined to inherit from <CODE>BankingDemo&lt;account-servant&gt;</CODE>, matching the inheritance relationship declared in the IDL.</P>
<P>Each class inherits from the abstract class <CODE>PortableServer/&lt;Servant&gt;</CODE>. This allows instances of the class to be registered with a POA.</P>
<P>In our implementation of the bank server, these servant classes are implemented by the following concrete subclasses:</P>
<PRE>
&lt;bank-implementation&gt;
&lt;account-implementation&gt;
&lt;checkingAccount-implementation&gt;
<P></P>
</PRE>
<P>The <CODE>&lt;bank-implementation&gt;</CODE> class implements <CODE>BankingDemo/&lt;bank-servant&gt;</CODE> by representing a bank as a connection to a database:</P>
<PRE>
define class &lt;bank-implementation&gt; (BankingDemo/&lt;bank-servant&gt;)
  slot connection :: &lt;connection&gt;, 
           required-init-keyword: connection:;
  constant slot poa :: PortableServer/&lt;POA&gt;, 
           required-init-keyword: poa:;
  constant slot name :: CORBA/&lt;string&gt;, 
           required-init-keyword: name:;
end class &lt;bank-implementation&gt;;
<P></P>
</PRE>
<P>The bank implementation class includes the slot <CODE>poa</CODE> to record the POA in which the bank servant is active, so that servants representing accounts at the bank can be registered in the same POA.</P>
<P>The <CODE>&lt;account-implementation&gt;</CODE> class implements <CODE>BankingDemo/&lt;account-servant&gt;</CODE>: </P>
<PRE>
define class &lt;account-implementation&gt; 
    (BankingDemo/&lt;account-servant&gt;)
  constant slot bank :: &lt;bank-implementation&gt;, 
    required-init-keyword: bank:;                
  constant slot name :: CORBA/&lt;string&gt;, 
    required-init-keyword: name:;
end class &lt;account-implementation&gt;;
<P></P>
</PRE>
<P>An instance of this class represents an account. The <CODE>bank</CODE> slot provides a connection to the database that holds the account's record. The <CODE>name</CODE> slot identifies the record in the database.</P>
<P>Finally, the <CODE>&lt;checkingAccount-implementation&gt;</CODE> class implements <CODE>BankingDemo/&lt;checkingAccount-servant&gt; </CODE>simply by inheriting from <CODE>&lt;account-implementation&gt;</CODE>: </P>
<PRE>
define class &lt;checkingAccount-implementation&gt; 
  (&lt;account-implementation&gt;, 
   BankingDemo/&lt;checkingAccount-servant&gt;)
end class &lt;checkingAccount-implementation&gt;;
<P></P>
</PRE>

</DIV>

<DIV>

<DIV>

<!-- TOC -->

</DIV>

<HR>
<ADDRESS>Developing Component Software with CORBA - 26 May 1999</ADDRESS>
<P><A HREF="corba_74.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="corba_72.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="corba_70.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A> <A HREF="corba_1.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="corba_2.htm"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="corb_206.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>

</DIV>
</BODY>
</HTML>
