<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997) -->
<HEAD>
<LINK REL=TOP HREF="core_1.htm">
<LINK REL=UP HREF="core_43.htm">
<LINK REL=PREV HREF="core_63.htm">
<LINK REL=NEXT HREF="core_65.htm">
<TITLE> last-handler-definer</TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997)">
</HEAD>
<BODY BGCOLOR="#FEFEF2" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<DIV>
<A NAME=HEADING64></A>

<DIV>
<P><A HREF="core_65.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="core_63.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="core_43.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A> <A HREF="core_1.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="core_2.htm"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="core_271.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>
<P>2.6   The COMMON-EXTENSIONS module </P>

</DIV>
<A NAME=HEADING64-0></A>
<H1> <A NAME=MARKER-2-469></A><A NAME=MARKER-2-470></A><A NAME=MARKER-10-471></A><A NAME=MARKER-9-472></A>last-handler-definer</H1>
<P><I>Definition macro</I></P>
<H3>Summary</H3>
<P> Defines a "last-handler" to be used after any dynamic handlers and before calling <CODE>default-handler</CODE>.</P>
<H3>Definition</H3>
<DL><DD><PRE>define last-handler (<I>condition</I>, #key <I>test</I>, <I>init-args</I>) 
  = <I>handler</I>;</PRE></DL>
<dl><dd><pre>define last-handler condition = handler;</pre></dl>
<dl><dd><pre>define last-handler;</pre></dl>
<H3>Arguments</H3>
<DL>
<P> </P><DT><I>condition</I><DD> A Dylan expression<SUB>bnf</SUB>. The class of condition for which the handler should be invoked.
<P> </P><DT><I>test</I><DD> A Dylan expression<SUB>bnf</SUB>. A function of one argument called on the condition to test applicability of the handler.
<P> </P><DT><I>init-args</I><DD> A Dylan expression<SUB>bnf</SUB>. A sequence of initialization arguments used to make an instance of the handler's condition class.
<P> </P><DT><I>handler</I><DD> A Dylan expression<SUB>bnf</SUB>. A function of two arguments, <I>condition</I> and <I>next-handler</I>, that is called on a condition which matches the handler's condition class and test function.
</DL>
<H3>Values</H3>
<P> None.</P>
<H3>Library</H3>
<dl><dd><pre>common-extensions</pre></dl>
<H3>Module</H3>
<dl><dd><pre>common-extensions</pre></dl>
<H3>Description</H3>
<P> A last-handler is a global form of the dynamic handler introduced via <CODE>let</CODE> <CODE>handler</CODE>, and is defined using an identical syntax. The last handler is treated as a globally visible dynamic handler. During signalling if a last-handler has been installed then it is the last handler tested for applicability before <CODE>default-handler</CODE> is invoked. If a last-handler has been installed then it is also the last handler iterated over in a call to <CODE>do-handlers</CODE>.</P>
<P> The first two defining forms are equivalent to the two alternate forms of let handler. If more than one of these first defining forms is executed then the last one executed determines the installed handler. The current last-handler can be uninstalled by using the degenerate third case of the defining form, that has no condition description or handler function.</P>
<P> The intention is that libraries will install last handlers to provide basic runtime error handling, taking recovery actions such as quitting the application, trying to abort the current application operation, or entering a connected debugger.</P>
<H3>Example</H3>
<P> The following form defines a last-handler function called <CODE>default-last-handler</CODE> that is invoked on conditions of class <CODE>&lt;serious-condition&gt;</CODE>:</P>
<DL><DD><PRE>define last-handler &lt;serious-condition&gt;
  = default-last-handler;</PRE></DL>
<H3>See also</H3>
<P> <A HREF="core_65.htm#MARKER-9-473"><CODE>one-of</CODE>,  page 38</A></P>
<P> <CODE>win32-last-handler</CODE> in the <I>C FFI and Win32</I> library reference, under library <CODE>win32-user</CODE> and module <CODE>win32-default-handler</CODE>.</P>

</DIV>

<DIV>

<DIV>

<!-- TOC -->

</DIV>

<HR>
<ADDRESS>Common Dylan and Functional Extensions - 31 Mar 00</ADDRESS>
<P><A HREF="core_65.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="core_63.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="core_43.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A> <A HREF="core_1.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="core_2.htm"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="core_271.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>

</DIV>
</BODY>
</HTML>
