<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997) -->
<HEAD>
<LINK REL=TOP HREF="core_1.htm">
<LINK REL=UP HREF="core_25.htm">
<LINK REL=PREV HREF="core_27.htm">
<LINK REL=NEXT HREF="core_29.htm">
<TITLE>2.5.2.3   Finalizers</TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997)">
</HEAD>
<BODY BGCOLOR="#FEFEF2" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<DIV>
<A NAME=HEADING28></A>

<DIV>
<P><A HREF="core_29.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="core_27.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="core_25.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A> <A HREF="core_1.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="core_2.htm"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="core_271.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>
<P>2.5.2   How the finalization interface works</P>

</DIV>
<A NAME=HEADING28-0></A>
<H1>2.5.2.3   <A NAME=MARKER-2-339></A>Finalizers</H1>
<P>The <A HREF="core_91.htm#MARKER-9-587"><CODE>drain-finalization-queue</CODE></A> function finalizes each object in the finalization queue by calling the generic function <A HREF="core_93.htm#MARKER-9-593"><CODE>finalize</CODE></A> on it. You should define methods for <A HREF="core_93.htm#MARKER-9-593"><CODE>finalize</CODE></A> on those classes whose instances may require finalization. These methods are called <I>finalizers</I>.</P>
<P>The recommended interface to finalization is through <A HREF="core_92.htm#MARKER-9-590"><CODE>finalize-when-unreachable</CODE></A> and <A HREF="core_91.htm#MARKER-9-587"><CODE>drain-finalization-queue</CODE></A>, but calling <A HREF="core_93.htm#MARKER-9-593"><CODE>finalize</CODE></A> on an object directly is also permitted. If you are certain you are finished with an object, it may be desirable to do so. For example, you might want to finalize an object created in a local binding before it goes out of scope. </P>
<P><B>Note:</B> Finalizable objects are only removed from the register if the garbage collector discovers that they are unreachable and moves them into the finalization queue. Calling <CODE>finalize</CODE> on an object directly does not affect its registration status. </P>
<P>The <A HREF="core_91.htm#MARKER-9-587"><CODE>drain-finalization-queue</CODE></A> function makes each call to <A HREF="core_93.htm#MARKER-9-593"><CODE>finalize</CODE></A> inside whatever dynamic handler environment is present when <CODE>drain-finalization-queue</CODE> is called. If the call to <CODE>drain-finalization-queue</CODE> is aborted via a non-local exit during a call to <CODE>finalize</CODE>, the finalization queue retains all the objects that had been added to it but which had not been passed to <CODE>finalize</CODE>.</P>
<P>There is a default method for <A HREF="core_93.htm#MARKER-9-593"><CODE>finalize</CODE></A> on <CODE>&lt;object&gt;</CODE>. The method does nothing. It is available so that it is safe for all finalizers to call <CODE>next-method</CODE>, a practice that we strongly encourage. See <A HREF="core_35.htm#MARKER-9-363">Section 2.5.3</A>. </P>

</DIV>

<DIV>

<DIV>

<!-- TOC -->

</DIV>

<HR>
<ADDRESS>Common Dylan and Functional Extensions - 31 Mar 00</ADDRESS>
<P><A HREF="core_29.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="core_27.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="core_25.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A> <A HREF="core_1.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="core_2.htm"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="core_271.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>

</DIV>
</BODY>
</HTML>
