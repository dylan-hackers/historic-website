<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<!-- Generated by Harlequin WebMaker 3.0.2 ( 8-May-1997) -->
<HEAD>
<LINK REL=TOP HREF="io_1.htm">
<LINK REL=UP HREF="io_247.htm">
<LINK REL=PREV HREF="io_247.htm">
<LINK REL=NEXT HREF="io_249.htm">
<TITLE> start-sockets</TITLE>
<META NAME=GENERATOR CONTENT="Harlequin WebMaker 3.0.2 ( 8-May-1997)">
</HEAD>
<BODY BGCOLOR="#FEFEF2" TEXT="#000000" LINK="#0000FF" VLINK="#800080" ALINK="#FF0000">

<DIV>
<A NAME=HEADING248></A>

<DIV>
<P><A HREF="io_249.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="io_247.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="io_247.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A> <A HREF="io_1.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="io_2.htm"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="io_333.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>
<P>10.2   Utilities</P>

</DIV>
<A NAME=HEADING248-0></A>
<H1> <A NAME=MARKER-2-2207></A><A NAME=MARKER-2-2208></A>start-sockets</H1>
<P><I>Function</I></P>
<PRE>
start-sockets () =&gt; ()
<P></P>
</PRE>
<DL>
<DT><DD>Applications must call this function before using <I>any</I> other function or variable from the Network library. 
<DT><DD>This function is necessary because the Win32 API library Winsock2, which the Network library calls to get native socket functionality, requires applications to call an initialization function before calling any Winsock2 API functions. The call to <CODE>start-sockets</CODE> calls this underlying Winsock2 function. 
<DT><DD>Note that you must not call <CODE>start-sockets</CODE> from a top-level form in any DLL project. The combination of this, and the restriction that you must call <CODE>start-sockets</CODE> before calling anything else, implies that no Network library function or variable can be called (directly or indirectly) from a top-level form in any DLL project. Instead, the DLL project should define a start function that calls <CODE>start-sockets</CODE> (directly or indirectly) or re-export <CODE>start-sockets</CODE> so that their clients can arrange to have it called from a top-level form in an appropriate EXE project.
<DT><DD>Applications using the Network library must arrange for <CODE>start-sockets</CODE> to be called (directly or indirectly) before <I>any</I> other sockets API functions. A good place to do this is at the beginning of your start function (usually the <CODE>main</CODE> method). For example:
</DL>
<PRE>
define method main () =&gt; ();
  start-sockets();
  let the-server = make(&lt;TCP-server-socket&gt;, port: 7);
  ...
end;
<P></P>
begin
  main();
end;
<P></P>
</PRE>
<DL>
<DT><DD>New start functions that call <CODE>start-sockets</CODE> and that are defined for DLL projects that use the Network library will inherit all of the restrictions described above for <CODE>start-sockets</CODE>.
<DT><DD>Calling a Network library function before calling <CODE>start-sockets</CODE> results in a <CODE>&lt;sockets-not-initialized&gt;</CODE> error. Calling <CODE>start-sockets</CODE> from a top-level form in a DLL project will result in unpredictable failures--probably access violations during initialization.
</DL>

</DIV>

<DIV>

<DIV>

<!-- TOC --><DL>
<DL>
<DT><A REL=BELOW HREF="io_249.htm#HEADING249-0"><B></B>with-socket-thread</A>
<DD>
</DL>
</DL>


</DIV>

<HR>
<ADDRESS>System and I/O Reference - 31 MAR 2000</ADDRESS>
<P><A HREF="io_249.htm"><IMG ALIGN=BOTTOM SRC=next.gif ALT=Next BORDER=0></A> <A HREF="io_247.htm"><IMG ALIGN=BOTTOM SRC=prev.gif ALT=Previous BORDER=0></A> <A HREF="io_247.htm"><IMG ALIGN=BOTTOM SRC=up.gif ALT=Up BORDER=0></A> <A HREF="io_1.htm"><IMG ALIGN=BOTTOM SRC=top.gif ALT=Top BORDER=0></A> <A HREF="io_2.htm"><IMG ALIGN=BOTTOM SRC=content.gif ALT=Contents BORDER=0></A> <A HREF="io_333.htm"><IMG ALIGN=BOTTOM SRC=index.gif ALT=Index BORDER=0></A></P>

</DIV>
</BODY>
</HTML>
