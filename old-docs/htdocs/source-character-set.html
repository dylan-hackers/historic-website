<HTML>
<HEAD>
<TITLE>Dylan Source Character Set Proposal</TITLE>
</HEAD>
<BODY>
<H1>Dylan Source Character Set Proposal</H1>
<B>PROPOSAL NAME: </B>Dylan Source Character Set<P>
<B>PROBLEM DESCRIPTION: </B><P>
<DL><DD>It is unclear exactly what characters are allowed in the source code of a Dylan program.  The grammar in Appendix A of <I>The Dylan Reference Manual</I> specifies the characters allowed in most places, but it does not define "whitespace", the characters allowed in comments, and the term "printing character" used in the specification of character, string, and symbol literals.  "Whitespace" is defined in two other places, but the definitions are inconsistent with each other.  The control characters generated by backslash escapes are not clearly identified. </DL><BR>
<B>PROPOSAL: </B><P>
<DL><DD>Page numbers herein refer to the First Printing of <I>The Dylan Reference Manual</I>, by Andrew Shalit, ISBN 0-201-44211-6.<P>
<DD>All ASCII codes mentioned in this proposal are identical to Unicodes with the same number, as defined in <A href="ftp://unicode.org/pub/UNIX/UNIDATA/UNIDATA2.TXT">the Unicode standard</A>.<P>
<DD>Insert the following new paragraph after the first paragraph of the section "Dylan Interchange Format" on page 21 of <I>The Dylan Reference Manual </I>:<P>
<DL><DD>The file contains only newline indications, the characters denoted by ASCII codes 32 through 126 inclusive, and the horizontal tab character denoted by ASCII code 9.  The encoding of newline indications and these characters is the standard encoding for the particular implementation's platform, so that standard file-transfer tools can transport the file between sites without loss of meaning.<P>
</DL><DD>Replace the second paragraph of the section Lexical Syntax on page 16 of <I>The Dylan Reference Manual</I> with the following:<P>
<B><DL><DD>Whitespace</B> is one or more contiguous space characters, horizontal tab characters, and/or newline indications.  Implementations can define additional whitespace characters.<BR>
<BR>
</DL><DD>In the next paragraph, remove the words "Although comments count as whitespace," and "genuine".<P>
<DD>In the next paragraph, change "newline character" to "newline indication".<P>
<DD>Replace the glossary definition of whitespace on page 451 of <I>The Dylan Reference Manual</I> with the following:<BR>
<B><BR>
<DL><DD>Whitespace</B><BR>
<DD>One or more contiguous space characters, horizontal tab characters, and/or newline indications.  Implementations can define additional whitespace characters.  Except within character, string, and symbol literals, the amount of contiguous whitespace is not significant in program code.<BR>
<BR>
</DL><DD>In the Lexical Notes on page 414 of <I>The Dylan Reference Manual</I>, add the following two paragraphs:<P>
<B><DL><DD></B>Whitespace can be one or more contiguous space characters, horizontal tab characters, and/or newline indications.  Implementations can define additional whitespace characters.<P>
<DD>A printing character (including space) is one of the characters denoted by ASCII codes 32 through 126 inclusive.  Implementations can define additional printing characters.<P>
</DL><DD>Replace the table of control characters generated by backslash escapes at the top of page 19 of <I>The Dylan Reference Manual</I> with the following:</DL><BR>

<TABLE BORDER WIDTH=468>
<TR VALIGN=top><TD ALIGN=right>Backslash Character</TD><TD ALIGN=center>Meaning</TD><TD ALIGN=center>ASCII code</TD></TR>
<TR VALIGN=top><TD ALIGN=right>a</TD><TD ALIGN=center>alarm</TD><TD ALIGN=center>7</TD></TR>
<TR VALIGN=top><TD ALIGN=right>b</TD><TD ALIGN=center>backspace</TD><TD ALIGN=center>8</TD></TR>
<TR VALIGN=top><TD ALIGN=right>e</TD><TD ALIGN=center>escape</TD><TD ALIGN=center>27</TD></TR>
<TR VALIGN=top><TD ALIGN=right>f</TD><TD ALIGN=center>form feed</TD><TD ALIGN=center>12</TD></TR>
<TR VALIGN=top><TD ALIGN=right>n</TD><TD ALIGN=center>newline</TD><TD ALIGN=center>-</TD></TR>
<TR VALIGN=top><TD ALIGN=right>r</TD><TD ALIGN=center>carriage return</TD><TD ALIGN=center>13</TD></TR>
<TR VALIGN=top><TD ALIGN=right>t</TD><TD ALIGN=center>tab</TD><TD ALIGN=center>9</TD></TR>
<TR VALIGN=top><TD ALIGN=right>0</TD><TD ALIGN=center>null</TD><TD ALIGN=center>0</TD></TR>
</TABLE>
</CENTER><P>
<DL><DD>ASCII codes in the above table are used only to identify the characters.  They do not specify the value returned by <CODE>as(&lt;integer&gt;, <I>character</I>)</CODE>.  There is no ASCII code for the newline character because newline indication is implementation
dependent.<BR>
<BR>
<I><DD>Note:<BR>
</I><DD>This proposal makes no attempt to specify what characters are available to a Dylan program at runtime, i.e. the complete set of instances of the class <CODE>&lt;character&gt;</CODE>.  However, this clearly must include at least all characters that can appear in a character or string literal, i.e. the printing characters (including space), the eight control characters representable by backslash escapes, and any Unicode characters (represented by backslash angle bracket hexadecimal escapes) that the implementation is able to represent.  Because <CODE>'\n'</CODE> is an instance of <CODE>&lt;character&gt;</CODE>, there must be a  runtime character for newline indication, even if a newline indication in files is something other than a single character.<BR>
<BR>
<DD>This proposal is a clarification.  It might be regarded as an incompatible change for programs written in an extended character set, but such programs were already non-portable before this proposal and can continue to work in whichever implementations they worked in before this proposal. </DL><BR>
<B>RATIONALE: </B><P>
<DL><DD>Only source code in Dylan Interchange Format is portable, so only that format is addressed here. <P>
<DD>I say "newline indication" instead of "newline character" because the encoding of newline in a source file might not be a single character (e.g. CR-LF in MS-DOS), or might not be in the form of characters at all (e.g. a record-structured file).<P>
<DD>Implementation-defined characters are mentioned in several places, even though they cannot appear in a standard Dylan Interchange Format file, to clarify where implementors have freedom in their own file format (which could be an extension of Dylan Interchange Format).  This information is only a hint to implementors, as it has no effect on programmers writing portable programs.<P>
<DD>I made the two definitions of whitespace on page 16 and page 451 consistent.<P>
<DD>I allowed horizontal tab as whitespace because of current practice in Dylan, C, and other languages.  I was a bit reluctant about this, as there is no universal agreement on the formatting effect of horizontal tab, but it seemed safest to conform to current practice.<BR>
<BR>
<DD>The rationale for removing newpage as a whitespace character is the weak one that it is only mentioned in one place and seems unnecessary.  Is the newpage character mentioned on page 451 the same as the form feed character mentioned on page 19, except the former is in source code and the latter is at runtime?  If someone thinks newpage as a whitespace character is important, it should be defined as a character denoted by an ASCII code and added uniformly.<P>
<DD>Allowing comments as whitespace (p.16) was an error. For example, <CODE>abc/*def*/ghi</CODE> is a single Dylan <I>word</I>, not two <I>words</I> separated by a comment.  This is clear from the remark on page 16 about a comment blending with a token.<BR>
<BR>
<DD>I used the minimum possible definition of "printing character", based on my belief that if this had been intended to include control characters such as tab, backspace, or newline, they would have been mentioned explicitly (as space is).<P>
<DD>The ASCII codes in the table of backslash escapes are intended to reflect universal current practice, and not to change anything.<P>
<DD>This proposal doesn't really make anything significantly easier or harder, it just clarifies what is permissible.  It might decrease unnecessary portability problems.<P>
<DD>This proposal has no effect on speed or safety.</DL><BR>
<B>EXAMPLES: </B><P>
<BLOCKQUOTE>Not applicable.</BLOCKQUOTE>
<BR>
<B>COST TO IMPLEMENTORS:</B> <P>
<DL><DD>This has no cost to implementors, unless they choose either to write their own code to be portable, or to provide a tool to check portability of code, which ought to check these character set restrictions.  The costs in those cases would not be significant.</DL><BR>
<B>RELATED PROPOSALS: </B><P>
<BLOCKQUOTE>None<I>.</I></BLOCKQUOTE>
<BR>
<B>REVISION HISTORY: </B><P>
<DL><DD>Version 1, 7-January-1997, by Dave Moon (not published)<BR>
<DD>Version 2, 8-January-1997, by Dave Moon</DL><BR>
<B>STATUS: </B><BR>
<DL><DD>Open 9-January-1997 </DL><BR>
<HR ALIGN=center  WIDTH=100% SIZE=2>

</BODY>
</HTML>
