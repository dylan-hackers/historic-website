<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  
  <!-- Relative Navigation -->
  
  <link rel="up" href="Built-In_Macros_and_Special_Definitions" />
  <link rel="prev" href="Statement_Macros" />
  <link rel="next" href="BNF" />
  
  <!-- Absolute Navigation -->
  
  <link rel="top" href="Title" />
  <link rel="start first" href="." />
  <link rel="copyright" href="Copyrights" />
  <link rel="contents" href="Contents" />
  <link rel="glossary" href="Glossary" />
  <link rel="index" href="Index" />
  <link rel="last author" href="Colophon" />
  
  <!-- Chapters -->
  
  <link rel="chapter" title="About This Book" href="Preface" />
  <link rel="chapter" title="1 Introduction" href="Introduction" />
  <link rel="chapter" title="2 Syntax" href="Syntax" />
  <link rel="chapter" title="3 Program Structure" href="Program_Structure" />
  <link rel="chapter" title="4 Program Control" href="Program_Control" />
  <link rel="chapter" title="5 Types and Classes" href="Types_and_Classes" />
  <link rel="chapter" title="6 Functions" href="Functions" />
  <link rel="chapter" title="7 Conditions" href="Conditions" />
  <link rel="chapter" title="8 Collections" href="Collections" />
  <link rel="chapter" title="9 Sealing" href="Sealing" />
  <link rel="chapter" title="10 Macros" href="Macros" />
  <link rel="chapter" title="11 The Built-In Classes" href="Built-In_Classes" />
  <link rel="chapter" title="12 The Built-In Functions" href="Built-In_Functions" />
  <link rel="chapter" title="13 Other Built-In Objects" href="Other_Built-In_Objects" />
  <link rel="chapter" title="14 The Built-In Macros and Special Definitions" href="Built-In_Macros_and_Special_Definitions" />
  
  <!-- Appendices -->
  
  <link rel="appendix" title="A BNF" href="BNF" />
  <link rel="appendix" title="B Exported Names" href="Exported_Names" />
  
  <!-- Stylesheet -->
  
  <link rel="stylesheet" href="drm.css" type="text/css" />

  <title>Function Macros &mdash; 14. The Built-In Macros and Special Definitions &mdash; The DRM</title>
</head>
<body>

<div id="header">
<div id="navigation-header">
    <p id="book-title">The Dylan Reference Manual</p>
    <p id="basic-navigation"><a class="previous" title="Go to previous page" href="Statement_Macros"><img alt="Previous" src="images/prev.gif" /></a> <a class="next" title="Go to next page" href="BNF"><img alt="Next" src="images/next.gif" /></a> <a class="up" title="Go to start of chapter" href="Built-In_Macros_and_Special_Definitions"><img alt="Up" src="images/up.gif" /></a> <a class="start" title="Go to start of book" href="Title"><img alt="Top" src="images/top.gif" /></a> <a class="contents" title="Go to table of contents" href="Contents"><img alt="Contents" src="images/content.gif" /></a> <a class="index" title="Go to index" href="Index"><img alt="index" src="images/index.gif" /></a></p>
  </div>

<div id="section-header">
  <p id="section-prefix">Chapter 14</p>
  <p id="section-name">The Built-In Macros and Special Definitions</p>
</div>

<div id="navigation-TOC">
  <ul class="front-matter">
    <li><a href="Title">Start</a></li>
    <li><a href="Contents">Contents</a></li>
    <li><a href="Preface">About This Book</a></li>
  </ul>
  <ol class="chapters">
    <li><a href="Introduction">Introduction</a></li>
    <li><a href="Syntax">Syntax</a></li>
    <li><a href="Program_Structure">Program Structure</a></li>
    <li><a href="Program_Control">Program Control</a></li>
    <li><a href="Types_and_Classes">Types and Classes</a></li>
    <li><a href="Functions">Functions</a></li>
    <li><a href="Conditions">Conditions</a></li>
    <li><a href="Collections">Collections</a></li>
    <li><a href="Sealing">Sealing</a></li>
    <li><a href="Macros">Macros</a></li>
    <li><a href="Built-In_Classes">The Built-In Classes</a></li>
    <li><a href="Built-In_Functions">The Built-In Functions</a></li>
    <li><a href="Other_Built-In_Objects">Other Built-In Objects</a></li>
    <li><a href="Built-In_Macros_and_Special_Definitions">The Built-In Macros and Special Definitions</a>
      <ul>
	<li><a href="Built-In_Macros_and_Special_Definitions_Overview">Overview</a></li>
	<li><a href="Definition_Macros">Definitions</a></li>
	<li><a href="Local_Declaration_Macros">Local Declarations</a></li>
	<li><a href="Statement_Macros">Statements</a></li>
	<li id="current">Function Macros
	  <ul class="page-toc">
	    <li><a href="#HEADING115-63">Assignment</a>
	      <ul>
		<li><a href="#HEADING115-64"><code>:=</code><span class="attributes-summary">[Function Macro]</span></a></li>
	      </ul>
	    </li>
	    <li><a href="#HEADING115-92">Conditional Execution</a>
	      <ul>
		<li><a href="#HEADING115-93"><code>|</code> <span class="attributes-summary">[Function Macro]</span></a></li>
		<li><a href="#HEADING115-100"><code>&amp;</code> <span class="attributes-summary">[Function Macro]</span></a></li>
	      </ul>
	    </li>
	  </ul>
	</li>
      </ul>
    </li>
  </ol>
  <ol class="appendices">
    <li><a href="BNF">BNF</a></li>
    <li><a href="Exported_Names">Exported Names</a></li>
  </ol>
  <ul class="back-matter">
    <li><a href="Glossary">Glossary</a></li>
    <li><a href="Index">Index</a></li>
    <li><a href="Colophon">Colophon</a></li>
  </ul>
  <ul class="errata">
    <li><a href="Errata">Errata</a></li>
  </ul>
</div>

<hr />

</div>

<div id="content">
<a name="HEADING115-0"></a>
<a name="UID-Built-In_Macros-5344"></a>
<h1 class="section-title"><a name="MARKER-9-2068"></a>Function Macros</h1>
<p class="T1.Text1"><a name="MARKER-2-2069"></a>Function macros provide syntax for assignment and for conditional execution. These three built-in function macros may be called using function-call syntax or operator syntax.</p>
<table class="numbered"><caption><strong>Table 14-4</strong>  Function Macros</caption>
  <tr><th class="primary"><p> Macro</p>
    </th><th><p> Description</p>
    </th><th><p> Page</p>
  </th></tr><tr><td><p> <code>:=</code></p>
    </td><td><p> <a href="#MARKER-9-2072">Stores a new value in a location.</a></p>
    </td><td><p> <a href="#MARKER-9-2072">409</a></p>
  </td></tr><tr><td><p> <code>|</code></p>
    </td><td><p> <a href="#MARKER-9-2076">Returns the value of the first of two operands that is true.</a></p>
    </td><td><p> <a href="#MARKER-9-2075">412</a></p>
  </td></tr><tr><td><p> <code>&amp;</code></p>
    </td><td><p> <a href="#MARKER-9-2079">If the value of a first operand is true, executes a second operand and returns its values.</a></p>
    </td><td><p> <a href="#MARKER-9-2079">412</a></p>
</td></tr></table><a name="HEADING115-63"></a>
<a name="UID-Built-In_Macros-5569"></a>
<h2 class="subsection-title"><a name="MARKER-2-2070"></a>Assignment</h2>
<a name="HEADING115-64"></a>
<h4 class="item-title"><span class="signature"><code id="MARKER-2-2071">:=</code> </span><span class="attributes-summary">[Function Macro]</span></h4>
<hr class="item-title" />
<p class="short-description"><a name="MARKER-9-2072"></a>Stores a new value in a location.</p>
<dl class="Cliche">
  <dt class="Cliche"><span>Macro Call:</span></dt>
  <dd class="Cliche"><p><var>place</var> <code>:=</code> <var>new-value</var></p></dd>
  <dt class="Cliche"><span>Arguments:</span></dt>
  <dd class="Cliche">
    <dl>
      <dt><var>place</var></dt>
      <dd><p><span class="BNF">expression<em class="BNF"><sub>bnf</sub></em></span></p></dd>
      <dt><var>new-value</var></dt>
      <dd><p><span class="BNF">expression<em class="BNF"><sub>bnf</sub></em></span></p></dd>
    </dl>
  </dd>
  <dt class="Cliche"><span>Values:</span></dt>
  <dd class="Cliche">
    <p><var>new-value</var>, an instance of <code>&lt;object&gt;</code>.</p>
  </dd>
  <dt class="Cliche"><span>Description:</span></dt>
  <dd class="Cliche"><p><code>:=</code> stores <var>new-value</var> in <var>place</var> and returns <var>new-value</var>.</p>
    <p class="T1.Text1"><var>place</var> may be a variable, a getter function or macro call with a corresponding setter, a slot access, or an element reference.</p>
    <p class="T1.Text1"><var>new-value</var> may be any operand. It is executed, and its value is stored in <var>place</var>.</p>
    <p class="T1.Text1">In all cases, <var>new-value</var> must be an appropriate type for <var>place</var> or an error is signaled.</p>
    <p class="T1.Text1">The <var>new-value</var> of an assignment statement is executed first, followed by the <var>place</var> (assuming the <var>place</var> requires any execution, which will only be true if it is not a binding name).</p>
    <a name="HEADING115-75"></a>
    <h5 class="description-subsection-title">Assignment to a binding</h5>
    <p class="T1.Text1">If <var>place</var> is a binding name, then <var>new-value</var> is stored in the binding. It is an error if there is no binding corresponding to <var>place</var>. (<code>:=</code> cannot be used to create bindings, only to change their values.)  An error is also signaled if <var>place</var> is a binding specialized to a type and the <var>new-value</var> is not of that type.</p>
    <pre class="code">
define variable *number* = 10;
*number*
<code> &rArr;</code>  10
*number* := *number* + 10;
<code> &rArr;</code>  20
*number*
<code> &rArr;</code>  20 </pre>
    <a name="HEADING115-78"></a>
    <h5 class="description-subsection-title">Assignment to a function or function macro</h5>
    <p class="T1.Text1">If <var>place</var> has the syntax of a function call, then <code>:=</code> will invoke the corresponding setter function. Given a binding named <var>fun</var>, the corresponding setter is the binding named <code><var>fun</var>-setter</code></i> in the current environment.</p>
  <p class="T1.Text1"><code>:=</code> maps <var>place</var> to <code><var>place</var>-setter</code></i> without regard for whether <var>place</var> is a function or a macro. It does not expand a macro call on the left-hand side before determining the setter.</p>
    <p class="T1.Text1">With the exception of the order of execution and a guaranteed return value, the following three expressions are equivalent:</p>
    <pre class="code">
*top-view*.subviews := generate-subviews()
subviews(*top-view*) := generate-subviews()
subviews-setter(generate-subviews(), *top-view*) </pre>
    <p class="T1.Text1">(The differences are as follows: the execution time of <code>subviews-setter</code> is undefined in the first two expressions but defined in the last; the first two expressions will return the value of the call to <code>generate-subviews</code> while the last will return the value of the call to <code>subviews-setter</code>.)</p>
    <pre class="code">
name(arg1,&hellip;argn ) := new-value </pre>
    <p class="T1.Text1">behaves exactly the same as</p>
    <pre class="code">
begin
  let <var>temp</var> = new-value;
  name-setter(temp, arg1,&hellip;argn );
  <var>temp</var>
end</pre>
    <p class="T1.Text1">This is true regardless of whether <code>name</code> and <code>name-setter</code> are functions or macros. Here <var>temp</var> stands for a variable with a unique name. If <code>name-setter</code> is a macro, it  is responsible for the order of executation of <code>arg1,&hellip;argn</code>.</p>
    <p class="T1.Text1">The same considerations apply to <code>arg.name := new-value</code>.</p>
    <a name="HEADING115-89"></a>
    <h5 class="description-subsection-title">Assignment to element references</h5>
    <p class="T1.Text1">Just as <code>[]</code> can be used as syntax for <code>element</code> and <code>aref</code>, <code>[]</code> and <code>:=</code> can be used as syntax for <code>element-setter</code> and <code>aref-setter</code>. For example, the following three expressions are equivalent:</p>
    <pre class="code">
foo[2] := &quot;quux&quot;
element (foo, 2) := &quot;quux&quot;
element-setter (&quot;quux&quot;, foo, 2).<a name="MARKER-2-2073"></a> </pre>
  </dd>
</dl>
<a name="HEADING115-92"></a>
<a name="UID-Built-In_Macros-5614"></a>
<h2 class="subsection-title">Conditional Execution</h2>
<a name="HEADING115-93"></a>
<h4 class="item-title"><span class="signature"><code id="MARKER-2-2074">|</code> </span><span class="attributes-summary">[Function Macro]</span></h4>
<hr class="item-title" />
<p class="short-description"><a name="MARKER-9-2075"></a>Returns the value of the first of two operands that is true.<a name="MARKER-9-2076"></a></p>
<dl class="Cliche">
<dt class="Cliche"><span>Macro Call:</span></dt>
<dd class="Cliche"><p><var>one</var> <code>|</code> <var>another</var></p></dd>
<dt class="Cliche"><span>Arguments:</span></dt>
<dd class="Cliche">
  <dl>
    <dt><var>one</var></dt>
    <dd><p><span class="BNF">expression<em class="BNF"><sub>bnf</sub></em></span></p></dd>
    <dt><var>another</var></dt>
    <dd><p><span class="BNF">expression<em class="BNF"><sub>bnf</sub></em></span></p></dd>
  </dl>
</dd>
<dt class="Cliche"><span>Values:</span></dt>
<dd class="Cliche"><p>Zero or more instances of <code>&lt;object&gt;</code>.</p></dd>
<dt class="Cliche"><span>Description:</span></dt>
<dd class="Cliche"><p><code>|</code> (<a name="MARKER-2-2077"></a>logical or) executes <var>one</var>. If the first value of <var>one</var> is true, that value is returned and <var>another</var> is not executed. Otherwise <var>another</var> is executed and its values are returned.</p></dd>
</dl>
<a name="HEADING115-100"></a>
<h4 class="item-title"><span class="signature"><code id="MARKER-2-2078">&amp;</code>  </span><span class="attributes-summary">[Function Macro]</span></h4>
<hr class="item-title" />
<p class="short-description"><a name="MARKER-9-2079"></a>If the value of a first operand is true, executes a second operand and returns its values.</p>
<dl class="Cliche">
<dt class="Cliche"><span>Macro Call:</span></dt>
<dd class="Cliche">
  <p class="macro-call">
    <var>one</var> <code>&amp;</code> <var>another</var> &rArr; <var>values</var>
  </p>
</dd>
<dt class="Cliche"><span>Arguments:</span></dt>
<dd class="Cliche">
  <dl>
    <dt><var>one</var></dt>
    <dd><p><span class="BNF">expression<em class="BNF"><sub>bnf</sub></em></span></p></dd>
    <dt><var>another</var></dt>
    <dd><p><span class="BNF">expression<em class="BNF"><sub>bnf</sub></em></span></p></dd>
  </dl>
</dd>
<dt class="Cliche"><span>Values:</span></dt>
<dd class="Cliche"><p>Zero or more instances of <code>&lt;object&gt;</code>.</p></dd>
<dt class="Cliche"><span>Description:</span></dt>
<dd class="Cliche"><p><code>&amp;</code> (<a name="MARKER-2-2080"></a>logical and) executes <var>one</var>. If the first value returned by <var>one</var> is false, <code>#f</code> is returned and <var>another</var> is not executed. Otherwise, <var>another</var> is executed and its values are returned.<a name="MARKER-2-2081"></a></p>
<a name="LINK-Built-In_Macros-lastpage"></a></dd>
</dl>

</div>

<div id="footer">

<hr class="footer" />
<address class="footer">The Dylan Reference Manual - 7 Apr 1998</address>
<p class="footer"><a class="previous" title="Go to previous page" href="Statement_Macros"><img alt="Previous" src="images/prev.gif" /></a> <a class="next" title="Go to next page" href="BNF"><img alt="Next" src="images/next.gif" /></a> <a class="up" title="Go to start of chapter" href="Built-In_Macros_and_Special_Definitions"><img alt="Up" src="images/up.gif" /></a> <a class="start" title="Go to start of book" href="Title"><img alt="Top" src="images/top.gif" /></a> <a class="contents" title="Go to table of contents" href="Contents"><img alt="Contents" src="images/content.gif" /></a> <a class="index" title="Go to index" href="Index"><img alt="index" src="images/index.gif" /></a></p>
<p class="footer">Copyright Apple Computer, Inc. 1996. Apple&reg; and the Apple logo are registered trademarks of Apple Computer, Inc. Used with permission. All Rights Reserved.</p>
<p class="footer">Originally generated with <a href="http://www.harlequin.com/webmaker">Harlequin WebMaker&reg;</a>, subsequently revised.</p>

</div>
</body>
</html>
