<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  
  <!-- Relative Navigation -->
  
  <link rel="up" href="drm_38.html" />
  <link rel="prev" href="drm_39.html" />
  <link rel="next" href="drm_41.html" />
  
  <!-- Absolute Navigation -->
  
  <link rel="top" href="drm_1.html" />
  <link rel="start first" href="index.html" />
  <link rel="copyright" href="drm_2.html" />
  <link rel="contents" href="drm_3.html" />
  <link rel="glossary" href="drm_126.html" />
  <link rel="index" href="drm_127.html" />
  <link rel="last author" href="drm_128.html" />
  
  <!-- Chapters -->
  
  <link rel="chapter" title="About This Book" href="drm_4.html" />
  <link rel="chapter" title="1 Introduction" href="drm_5.html" />
  <link rel="chapter" title="2 Syntax" href="drm_9.html" />
  <link rel="chapter" title="3 Program Structure" href="drm_25.html" />
  <link rel="chapter" title="4 Program Control" href="drm_28.html" />
  <link rel="chapter" title="5 Types and Classes" href="drm_38.html" />
  <link rel="chapter" title="6 Functions" href="drm_47.html" />
  <link rel="chapter" title="7 Conditions" href="drm_52.html" />
  <link rel="chapter" title="8 Collections" href="drm_59.html" />
  <link rel="chapter" title="9 Sealing" href="drm_70.html" />
  <link rel="chapter" title="10 Macros" href="drm_76.html" />
  <link rel="chapter" title="11 The Built-In Classes" href="drm_87.html" />
  <link rel="chapter" title="12 The Built-In Functions" href="drm_96.html" />
  <link rel="chapter" title="13 Other Built-In Objects" href="drm_108.html" />
  <link rel="chapter" title="14 The Built-In Macros and Special Definitions" href="drm_110.html" />
  
  <!-- Appendices -->
  
  <link rel="appendix" title="A BNF" href="drm_116.html" />
  <link rel="appendix" title="B Exported Names" href="drm_119.html" />
  
  <!-- Stylesheet -->
  
  <link rel="stylesheet" href="drm.css" type="text/css" />

  <title>The Type Protocol &mdash; 5. Types and Classes &mdash; The DRM</title>
</head>
<body>

<div id="header">
<div id="navigation-header">
    <p id="book-title">The Dylan Reference Manual</p>
    <p id="basic-navigation"><a class="previous" title="Go to previous page" href="drm_39.html"><img alt="Previous" src="prev.gif" /></a> <a class="next" title="Go to next page" href="drm_41.html"><img alt="Next" src="next.gif" /></a> <a class="up" title="Go to start of chapter" href="drm_38.html"><img alt="Up" src="up.gif" /></a> <a class="start" title="Go to start of book" href="drm_1.html"><img alt="Top" src="top.gif" /></a> <a class="contents" title="Go to table of contents" href="drm_3.html"><img alt="Contents" src="content.gif" /></a> <a class="index" title="Go to index" href="drm_127.html"><img alt="index" src="index.gif" /></a></p>
  </div>

<div id="section-header">
  <p id="section-prefix">Chapter 5</p>
  <p id="section-name">Types and Classes</p>
</div>

<div id="navigation-TOC">
  <ul class="front-matter">
    <li><a href="drm_1.html">Start</a></li>
    <li><a href="drm_3.html">Contents</a></li>
    <li><a href="drm_4.html">About This Book</a></li>
  </ul>
  <ol class="chapters">
    <li><a href="drm_5.html">Introduction</a></li>
    <li><a href="drm_9.html">Syntax</a></li>
    <li><a href="drm_25.html">Program Structure</a></li>
    <li><a href="drm_28.html">Program Control</a></li>
    <li><a href="drm_38.html">Types and Classes</a>
      <ul>
	<li><a href="drm_39.html">Overview</a></li>
	<li id="current">The Type Protocol
	  <ul>
	    <li><a href="#HEADING40-14">Base Types and Pseudosubtypes</a></li>
	    <li><a href="#HEADING40-19">Type Disjointness</a></li>
	  </ul>
	</li>
	<li><a href="drm_41.html">Classes</a></li>
	<li><a href="drm_42.html">Slots</a></li>
	<li><a href="drm_43.html">Instance Creation and Initialization</a></li>
	<li><a href="drm_44.html">Singletons</a></li>
	<li><a href="drm_45.html">Union Types</a></li>
	<li><a href="drm_46.html">Limited Types</a></li>
      </ul>
    </li>
    <li><a href="drm_47.html">Functions</a></li>
    <li><a href="drm_52.html">Conditions</a></li>
    <li><a href="drm_59.html">Collections</a></li>
    <li><a href="drm_70.html">Sealing</a></li>
    <li><a href="drm_76.html">Macros</a></li>
    <li><a href="drm_87.html">The Built-In Classes</a></li>
    <li><a href="drm_96.html">The Built-In Functions</a></li>
    <li><a href="drm_108.html">Other Built-In Objects</a></li>
    <li><a href="drm_110.html">The Built-In Macros and Special Definitions</a></li>
  </ol>
  <ol class="appendices">
    <li><a href="drm_116.html">BNF</a></li>
    <li><a href="drm_119.html">Exported Names</a></li>
  </ol>
  <ul class="back-matter">
    <li><a href="drm_126.html">Glossary</a></li>
    <li><a href="drm_127.html">Index</a></li>
    <li><a href="drm_128.html">Colophon</a></li>
  </ul>
  <ul class="errata">
    <li><a href="drm_errata.html">Errata</a></li>
  </ul>
</div>

<hr />

</div>

<div id="content">
<a name="HEADING40-0"></a>
<a name="UID-Types_and_Classes-1198"></a>
<h1 class="section-title"><a name="MARKER-9-536"></a><a name="MARKER-2-537"></a>The Type Protocol</h1>
<p class="T1.Text1">The type protocol comprises the following:</p>
<ul>
<li><a name="MARKER-2-538"></a>All types may be used as specializers for method parameters, bindings, and slots.</li>
<li><code><a name="MARKER-2-539"></a>instance?(<var>object</var>, <var>type</var>)</code> tests type membership.</li>
<li><code><a name="MARKER-2-540"></a>subtype?(<var>type1</var>, <var>type2</var>)</code> tests type inclusion.</li>
<li><code><a name="MARKER-2-541"></a>make(<var>type</var> <var>&hellip;</var>)</code> makes an instance. This operation is only supported if the type is instantiable.</li>
<li><a name="MARKER-2-542"></a>Type objects are immutable.</li>
<li><a name="MARKER-2-543"></a>If two type objects are equivalent and are not classes, it is unspecified whether they are <code>==</code>.</li>
</ul>
<p class="T1.Text1"><a name="MARKER-2-544"></a>The following is an informal description of type relationships: The function <a name="MARKER-2-545"></a><code>subtype?</code> defines a partial ordering of all types. Type <var>t<em><sub>1</sub></em></var> is a subtype of type <var>t<em><sub>2</sub></em></var> (i.e., <code>subtype?(<var>t<em><sub>1</sub></em></var>, <var>t<em><sub>2</sub></em></var>)</code> is true) if it is impossible to encounter an object that is an instance of <var>t<em><sub>1</sub></em></var> but not an instance of <var>t<em><sub>2</sub></em></var>. It follows that every type is a subtype of itself. Two types <var>t<em><sub>1</sub></em></var> and <var>t<em><sub>2</sub></em></var> are said to be <a name="MARKER-2-546"></a><dfn>equivalent types</dfn> if <code>subtype?(<var>t<em><sub>1</sub></em></var>, <var>t<em><sub>2</sub></em></var>)</code> and <code>subtype?(<var>t<em><sub>2</sub></em></var>, <var>t<em><sub>1</sub></em></var>)</code> are both true. <var>t<em><sub>1</sub></em></var> is said to be a <a name="MARKER-2-547"></a><dfn>proper subtype</dfn> of <var>t<em><sub>2</sub></em></var> if <var>t<em><sub>1</sub></em></var> is a subtype of <var>t<em><sub>2</sub></em></var> and <var>t<em><sub>2</sub></em></var> is not a subtype of <var>t<em><sub>1</sub></em></var>.</p>
<p class="T1.Text1"><code>subtype?</code> on classes is defined by inheritance. A class is a subtype of itself and of its general superclasses.</p>
<p class="T1.Text1"><code>subtype?</code> on <a name="MARKER-2-548"></a>singletons is defined by object type and identity. If <var>x</var> is an object and <var>t</var> is a type, <code>subtype?(singleton(<var>x</var>), <var>t</var>)</code> will be true only if <code>instance?(<var>x</var>, <var>t</var>)</code> is true.</p>
<p class="T1.Text1"><code>subtype?</code> rules for union types are given in <a href="drm_45.html#MARKER-9-701" class="T1.Text1">"Union Types" on page 72</a>. <code>subtype?</code> rules for limited integer types are given in <a href="drm_46.html#MARKER-9-710" class="T1.Text1">"Limited Integer Types" on page 74</a>. <code>subtype?</code> rules for limited collection types are given in <a href="drm_69.html#MARKER-9-1060" class="T1.Text1">"Limited Collection Types" on page 126</a>.</p>
<p class="T1.Text1"><code><a name="MARKER-2-549"></a>&lt;object&gt;</code> is the root of the type hierarchy. All objects are instances of <code>&lt;object&gt;</code>, and all types are subtypes of <code>&lt;object&gt;</code>.</p>
<p class="T1.Text1">A number of operations on types are described in <a href="drm_103.html#MARKER-9-1858" class="T1.Text1">"Reflective Operations on Types" on page 343</a>.</p>
<a name="HEADING40-14"></a>
<a name="UID-Types_and_Classes-4914"></a>
<h2 class="subsection-title"><a name="MARKER-2-550"></a>Base Types and Pseudosubtypes</h2>
<p class="T1.Text1">Every type has a <dfn>base type</dfn>. The base type for a class is the class itself. The base type of a singleton is the singleton  itself. The base type of a union is the union of the base types of its  component types. The base type of a limited type <code>limited(<var>C</var>, <var>&hellip;</var>)</code> is <var>C</var>.</p>
<p class="T1.Text1">The type <var>t<em><sub>1</sub></em></var> is a <dfn>pseudosubtype</dfn> of the type <var>t<em><sub>2</sub></em></var> if <var>t<em><sub>1</sub></em></var> is a subtype of the base type of <var>t<em><sub>2</sub></em></var> and <var>t<em><sub>1</sub></em></var> and <var>t<em><sub>2</sub></em></var> are not disjoint.</p>
<p class="T1.Text1">Note that<var> t<em><sub>1</sub></em></var> being a subtype of <var>t<em><sub>2</sub></em></var> implies that <var>t<em><sub>1</sub></em></var> is a pseudosubtype of <var>t<em><sub>2</sub></em></var>, but <var>t<em><sub>1</sub></em></var> being a pseudosubtype of <var>t<em><sub>2</sub></em></var> does not imply that <var>t<em><sub>1</sub></em></var> is a subtype of <var>t<em><sub>2</sub></em></var>. Note also that if <var>t<em><sub>2</sub></em></var> is not a limited type or some other nonstandard type, then pseudosubtype is the same as subtype.</p>
<p class="T1.Text1">Base types and pseudosubtypes are used in the rules for sealing, described in <a href="drm_70.html" class="T1.Text1">Chapter 9, "Sealing."</a><a name="MARKER-2-551"></a></p>
<a name="HEADING40-19"></a>
<a name="UID-Types_and_Classes-4893"></a>
<h2 class="subsection-title"><a name="MARKER-2-552"></a><a name="MARKER-9-553"></a>Type Disjointness</h2>
<p class="T1.Text1">Informally, two types are disjoint if there can be no object that is an instance of both types. Formally, the disjointness of types is specified by the following set of rules. (Some of these rules reference definitions given in <a href="drm_46.html#MARKER-9-710" class="T1.Text1">"Limited Integer Types" on page 74</a>,  <a href="drm_68.html#MARKER-9-1051" class="T1.Text1">"Element Types" on page 124</a> and <a href="drm_69.html#MARKER-9-1060" class="T1.Text1">"Limited Collection Types" on page 126</a>.)</p>
<ul>
<li>Two <a name="MARKER-2-554"></a>classes are disjoint if they have no common subclasses.</li>
<li>A <a name="MARKER-2-555"></a>union type is disjoint from another type if all of the union type's component types are disjoint from that other type.</li>
<li>A <a name="MARKER-2-556"></a>singleton type is disjoint from another type if the singleton's object is not an instance of that other type.</li>
<li>A <a name="MARKER-2-557"></a>limited collection type is disjoint from a class if their base types are disjoint, or the class is a subclass of <code>&lt;collection&gt;</code> and its element type is definite and not equivalent to the limited collection type's element type, or the class is a subclass of <code>&lt;collection&gt;</code> and its element type is indefinite and not a supertype of the limited collection type's element type.</li>
<li>A limited collection type is disjoint from a limited integer type because the classes <code>&lt;collection&gt;</code> and <code>&lt;integer&gt;</code> are disjoint.</li>
<li>Two limited collection types are disjoint if their base types are disjoint, or their element types are not equivalent, or their sizes are not compatible. Two sizes are compatible if either is <code>#f</code>, or they are <code>=</code> to each other, or one is a sequence of integers and the other is the product of those integers.</li>
<li>Two limited integer types are disjoint if the minimum value of one is greater than the maximum value for the other.</li>
<li>A limited integer type is disjoint from a class if their base types are disjoint or the class is a subclass of <code>&lt;integer&gt;</code> whose range is disjoint from the limited integer type's range.<a name="MARKER-2-558"></a><a name="MARKER-2-559"></a><a name="MARKER-2-560"></a></li>
</ul>

</div>

<div id="footer">

<hr class="footer" />
<address class="footer">The Dylan Reference Manual - 7 Apr 1998</address>
<p class="footer"><a class="previous" title="Go to previous page" href="drm_39.html"><img alt="Previous" src="prev.gif" /></a> <a class="next" title="Go to next page" href="drm_41.html"><img alt="Next" src="next.gif" /></a> <a class="up" title="Go to start of chapter" href="drm_38.html"><img alt="Up" src="up.gif" /></a> <a class="start" title="Go to start of book" href="drm_1.html"><img alt="Top" src="top.gif" /></a> <a class="contents" title="Go to table of contents" href="drm_3.html"><img alt="Contents" src="content.gif" /></a> <a class="index" title="Go to index" href="drm_127.html"><img alt="index" src="index.gif" /></a></p>
<p class="footer">Copyright Apple Computer, Inc. 1996. Apple&#174; and the Apple logo are registered trademarks of Apple Computer, Inc. Used with permission. All Rights Reserved.</p>
<p class="footer">Originally generated with <a href="http://www.harlequin.com/webmaker" class="footer">Harlequin WebMaker&#174;</a>, subsequently revised.</p>

</div>
</body>
</html>
