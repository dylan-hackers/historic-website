<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  
  <!-- Relative Navigation -->
  
  <link rel="up" href="drm_110.html" />
  <link rel="prev" href="drm_114.html" />
  <link rel="next" href="drm_116.html" />
  
  <!-- Absolute Navigation -->
  
  <link rel="top" href="drm_1.html" />
  <link rel="start first" href="index.html" />
  <link rel="contents" href="drm_2.html" />
  <link rel="copyright" href="drm_3.html" />
  <link rel="glossary" href="drm_126.html" />
  <link rel="index" href="drm_127.html" />
  <link rel="last author" href="drm_128.html" />
  
  <!-- Chapters -->
  
  <link rel="chapter" title="About This Book" href="drm_4.html" />
  <link rel="chapter" title="1 Introduction" href="drm_5.html" />
  <link rel="chapter" title="2 Syntax" href="drm_9.html" />
  <link rel="chapter" title="3 Program Structure" href="drm_25.html" />
  <link rel="chapter" title="4 Program Control" href="drm_28.html" />
  <link rel="chapter" title="5 Types and Classes" href="drm_38.html" />
  <link rel="chapter" title="6 Functions" href="drm_47.html" />
  <link rel="chapter" title="7 Conditions" href="drm_52.html" />
  <link rel="chapter" title="8 Collections" href="drm_59.html" />
  <link rel="chapter" title="9 Sealing" href="drm_70.html" />
  <link rel="chapter" title="10 Macros" href="drm_76.html" />
  <link rel="chapter" title="11 The Built-In Classes" href="drm_87.html" />
  <link rel="chapter" title="12 The Built-In Functions" href="drm_96.html" />
  <link rel="chapter" title="13 Other Built-In Objects" href="drm_108.html" />
  <link rel="chapter" title="14 The Built-In Macros and Special Definitions" href="drm_110.html" />
  
  <!-- Appendices -->
  
  <link rel="appendix" title="A BNF" href="drm_116.html" />
  <link rel="appendix" title="B Exported Names" href="drm_119.html" />
  
  <!-- Stylesheet -->
  
  <link title="main style sheet" rel="stylesheet" href="drm.css" type="text/css" />

  <title>Function Macros</title>
</head>
<body>

<div class="wm-div-body">
<a name="HEADING115"></a>

<div class="wm-div-headers">
<p class="header"><a href="drm_116.html" class="header"><img alt="next" src="next.gif" class="header" /></a> <a href="drm_114.html" class="header"><img alt="prev" src="prev.gif" class="header" /></a> <a href="drm_110.html" class="header"><img alt="up" src="up.gif" class="header" /></a> <a href="drm_1.html" class="header"><img alt="top" src="top.gif" class="header" /></a> <a href="drm_2.html" class="header"><img alt="content" src="content.gif" class="header" /></a> <a href="drm_127.html" class="header"><img alt="index" src="index.gif" class="header" /></a></p>
<p class="header">14 The Built-In Macros and Special Definitions</p>

</div>
<a name="HEADING115-0"></a>
<a name="UID-Built-In_Macros-5344"></a>
<h1 class="H1.Heading1"><a name="MARKER-9-2068"></a>Function Macros</h1>
<p class="T1.Text1"><a name="MARKER-2-2069"></a>Function macros provide syntax for assignment and for conditional execution. These three built-in function macros may be called using function-call syntax or operator syntax.</p>
<table class="numbered"><caption class="Tb.Table"><strong>Table 14-4</strong>  Function Macros</caption>
  <tr><th class="primary"><p class="TbH.TblHd"> Macro</p>
    </th><th><p class="TbH.TblHd"> </p>
    </th><th><p class="TbH.TblHd"> Description</p>
    </th><th><p class="TbH.TblHd"> Page</p>
  </th></tr><tr><td><p class="TbT.TblText"> <code>:=</code></p>
    </td><td><p class="TbT.TblText"> </p>
    </td><td><p class="TbT.TblText"> <a href="#MARKER-9-2072" class="TbT.TblText">Stores a new value in a location.</a></p>
    </td><td><p class="TbT.TblText"> <a href="#MARKER-9-2072" class="TbT.TblText">409</a></p>
  </td></tr><tr><td><p class="TbT.TblText"> <code>|</code></p>
    </td><td><p class="TbT.TblText"> </p>
    </td><td><p class="TbT.TblText"> <a href="#MARKER-9-2076" class="TbT.TblText">Returns the value of the first of two operands that is true.</a></p>
    </td><td><p class="TbT.TblText"> <a href="#MARKER-9-2075" class="TbT.TblText">412</a></p>
  </td></tr><tr><td><p class="TbT.TblText"> <code>&amp;</code></p>
    </td><td><p class="TbT.TblText"> </p>
    </td><td><p class="TbT.TblText"> <a href="#MARKER-9-2079" class="TbT.TblText">If the value of a first operand is true, executes a second operand and returns its values.</a></p>
    </td><td><p class="TbT.TblText"> <a href="#MARKER-9-2079" class="TbT.TblText">412</a></p>
</td></tr></table><a name="HEADING115-63"></a>
<a name="UID-Built-In_Macros-5569"></a>
<h2 class="H2.Heading2"><a name="MARKER-2-2070"></a>Assignment</h2>
<a name="HEADING115-64"></a>
<h3 class="H4.Heading4"><code><a name="MARKER-2-2071"></a>:=</code> <span class="attributes-summary">[Function Macro]</span></h3>
<hr class="H4.Heading4" />
<p class="SD.ShortDescription"><a name="MARKER-9-2072"></a>Stores a new value in a location.</p>
<dl class="Cliche">
  <dt class="Cliche">Macro Call:</dt>
  <dd class="Cliche"><p class="Cliche"> <i class="parameter Cliche">place<code> := new-value</code></i></p></dd>
  <dt class="Cliche">Arguments:</dt>
  <dd class="Cliche">
    <dl>
      <dt><var>place</var></dt>
      <dd>
        <p class="Cliche"><code>expression<em class="BNF Cliche"><sub>bnf</sub></em></code></p>
      </dd>
    </dl>
  </dd>
  <dd><dl class="RP.RoutineParam">
      <dt class="RP.RoutineParam"><var>new-value</var></dt>
      <dd class="RP.RoutineParam"><p class="RP.RoutineParam"> <code>expression<em class="BNF RP.RoutineParam"><sub>bnf</sub></em></code></p></dd>
  </dl></dd>
  <dt class="Cliche">Values:</dt>
  <dd class="Cliche">
    <dl>
      <dt><var>new-value</var></dt>
      <dd>
        <p class="Cliche">, an instance of <code>&lt;object&gt;</code>.</p>
      </dd>
    </dl>
  </dd>
  <dt class="Cliche">Description:</dt>
  <dd class="Cliche"><p class="Cliche"> <code>:=</code> stores <var>new-value</var> in <var>place</var> and returns <var>new-value</var>.</p>
    <p class="T1.Text1"><var>place</var> may be a variable, a getter function or macro call with a corresponding setter, a slot access, or an element reference.</p>
    <p class="T1.Text1"><var>new-value</var> may be any operand. It is executed, and its value is stored in <var>place</var>.</p>
    <p class="T1.Text1">In all cases, <var>new-value</var> must be an appropriate type for <var>place</var> or an error is signaled.</p>
    <p class="T1.Text1">The <var>new-value</var> of an assignment statement is executed first, followed by the <var>place</var> (assuming the <var>place</var> requires any execution, which will only be true if it is not a binding name).</p>
    <a name="HEADING115-75"></a>
    <h4 class="H5.Heading5">Assignment to a binding</h4>
    <p class="T1.Text1">If <var>place</var> is a binding name, then <var>new-value</var> is stored in the binding. It is an error if there is no binding corresponding to <var>place</var>. (<code>:=</code> cannot be used to create bindings, only to change their values.)  An error is also signaled if <var>place</var> is a binding specialized to a type and the <var>new-value</var> is not of that type.</p>
    <pre class="Cv.Code">
define variable *number* = 10;
*number*
<code> &rArr;</code>  10
*number* := *number* + 10;
<code> &rArr;</code>  20
*number*
<code> &rArr;</code>  20 </pre>
    <a name="HEADING115-78"></a>
    <h4 class="H5.Heading5">Assignment to a function or function macro</h4>
    <p class="T1.Text1">If <var>place</var> has the syntax of a function call, then <code>:=</code> will invoke the corresponding setter function. Given a binding named <var>fun</var>, the corresponding setter is the binding named <i class="parameter T1.Text1">fun<code>-setter</code></i> in the current environment.</p>
    <p class="T1.Text1"><code>:=</code> maps <var>place</var> to <i class="parameter T1.Text1">place<code>-setter</code></i> without regard for whether <var>place</var> is a function or a macro. It does not expand a macro call on the left-hand side before determining the setter.</p>
    <p class="T1.Text1">With the exception of the order of execution and a guaranteed return value, the following three expressions are equivalent:</p>
    <pre class="Cv.Code">
*top-view*.subviews := generate-subviews()
subviews(*top-view*) := generate-subviews()
subviews-setter(generate-subviews(), *top-view*) </pre>
    <p class="T1.Text1">(The differences are as follows: the execution time of <code>subviews-setter</code> is undefined in the first two expressions but defined in the last; the first two expressions will return the value of the call to <code>generate-subviews</code> while the last will return the value of the call to <code>subviews-setter</code>.)</p>
    <pre class="Cv.Code">
name(arg1,&hellip;argn ) := new-value </pre>
    <p class="T1.Text1">behaves exactly the same as</p>
    <pre class="Cv.Code">
begin
  let <var>temp</var> = new-value;
  name-setter(temp, arg1,&hellip;argn );
  <var>temp
</var>end </pre>
    <p class="T1.Text1">This is true regardless of whether <code>name</code> and <code>name-setter</code> are functions or macros. Here <var>temp</var> stands for a variable with a unique name. If <code>name-setter</code> is a macro, it  is responsible for the order of executation of <code>arg1,&hellip;argn</code>.</p>
    <p class="T1.Text1">The same considerations apply to <code>arg.name := new-value</code>.</p>
    <a name="HEADING115-89"></a>
    <h4 class="H5.Heading5">Assignment to element references</h4>
    <p class="T1.Text1">Just as <code>[]</code> can be used as syntax for <code>element</code> and <code>aref</code>, <code>[]</code> and <code>:=</code> can be used as syntax for <code>element-setter</code> and <code>aref-setter</code>. For example, the following three expressions are equivalent:</p>
    <pre class="Cv.Code">
foo[2] := &quot;quux&quot;
element (foo, 2) := &quot;quux&quot;
element-setter (&quot;quux&quot;, foo, 2).<a name="MARKER-2-2073"></a> </pre>
  </dd>
</dl>
<a name="HEADING115-92"></a>
<a name="UID-Built-In_Macros-5614"></a>
<h2 class="H2.Heading2">Conditional Execution</h2>
<a name="HEADING115-93"></a>
<h3 class="H4.Heading4"><code><a name="MARKER-2-2074"></a>|</code> <span class="attributes-summary">[Function Macro]</span></h3>
<hr class="H4.Heading4" />
<p class="SD.ShortDescription"><a name="MARKER-9-2075"></a>Returns the value of the first of two operands that is true.<a name="MARKER-9-2076"></a></p>
<dl class="Cliche">
<dt class="Cliche">Macro Call:</dt>
<dd class="Cliche"><p class="Cliche"> <i class="parameter Cliche">one<code>  | another</code></i></p></dd>
<dt class="Cliche">Arguments:</dt>
<dd class="Cliche">
    <dl>
      <dt><var>one</var></dt>
      <dd>
        <p class="Cliche"><code>expression<em class="BNF Cliche"><sub>bnf</sub></em></code></p>
      </dd>
    </dl>
  </dd>
<dd><dl class="RP.RoutineParam">
<dt class="RP.RoutineParam"><var>another</var></dt>
<dd class="RP.RoutineParam"><p class="RP.RoutineParam"> <code>expression<em class="BNF RP.RoutineParam"><sub>bnf</sub></em></code></p></dd>
</dl></dd>
<dt class="Cliche">Values:</dt>
<dd class="Cliche"><p class="Cliche"> Zero or more instances of <code>&lt;object&gt;</code>.</p></dd>
<dt class="Cliche">Description:</dt>
<dd class="Cliche"><p class="Cliche"> <code>|</code> (<a name="MARKER-2-2077"></a>logical or) executes <var>one</var>. If the first value of <var>one</var> is true, that value is returned and <var>another</var> is not executed. Otherwise <var>another</var> is executed and its values are returned.</p></dd>
</dl>
<a name="HEADING115-100"></a>
<h3 class="H4.Heading4"><code><a name="MARKER-2-2078"></a>&amp;</code>  <span class="attributes-summary">[Function Macro]</span></h3>
<hr class="H4.Heading4" />
<p class="SD.ShortDescription"><a name="MARKER-9-2079"></a>If the value of a first operand is true, executes a second operand and returns its values.</p>
<dl class="Cliche">
<dt class="Cliche">Macro Call:</dt>
<dd class="Cliche">
  <p class="macro-call">
    <code><var>one</var> &amp; <var>another</var> </code>&rArr;<code> <var>values</var></code>
  </p>
</dd>
<dt class="Cliche">Arguments:</dt>
<dd class="Cliche">
    <dl>
      <dt><var>one</var></dt>
      <dd>
        <p class="Cliche"><code>expression<em class="BNF Cliche"><sub>bnf</sub></em></code></p>
      </dd>
    </dl>
  </dd>
<dd><dl class="RP.RoutineParam">
<dt class="RP.RoutineParam"><var>another</var></dt>
<dd class="RP.RoutineParam"><p class="RP.RoutineParam"> <code>expression<em class="BNF RP.RoutineParam"><sub>bnf</sub></em></code></p></dd>
</dl></dd>
<dt class="Cliche">Values:</dt>
<dd class="Cliche"><p class="Cliche"> Zero or more instances of <code>&lt;object&gt;</code>.</p></dd>
<dt class="Cliche">Description:</dt>
<dd class="Cliche"><p class="Cliche"> <code>&amp;</code> (<a name="MARKER-2-2080"></a>logical and) executes <var>one</var>. If the first value returned by <var>one</var> is false, <code>#f</code> is returned and <var>another</var> is not executed. Otherwise, <var>another</var> is executed and its values are returned.<a name="MARKER-2-2081"></a></p>
<a name="LINK-Built-In_Macros-lastpage"></a></dd>
</dl>

</div>

<div class="wm-div-footers">

<div class="wm-div-toc">

<ul class="footer">
<li class="footer"><a href="drm_115.html#HEADING115-63" class="footer">Assignment</a></li>
<li class="footer"><a href="drm_115.html#HEADING115-64" class="footer"> := [Function Macro]</a></li>
<li class="footer"><a href="drm_115.html#HEADING115-75" class="footer">Assignment to a binding</a></li>
<li class="footer"><a href="drm_115.html#HEADING115-78" class="footer">Assignment to a function or function macro</a></li>
<li class="footer"><a href="drm_115.html#HEADING115-89" class="footer">Assignment to element references</a></li>
<li class="footer"><a href="drm_115.html#HEADING115-92" class="footer">Conditional Execution</a></li>
<li class="footer"><a href="drm_115.html#HEADING115-93" class="footer">| [Function Macro]</a></li>
<li class="footer"><a href="drm_115.html#HEADING115-100" class="footer">&amp;  [Function Macro]</a></li>
</ul>


</div>

<hr class="footer" />
<address class="footer">The Dylan Reference Manual - 7 Apr 1998</address>
<p class="footer"><a href="drm_116.html" class="header"><img alt="next" src="next.gif" class="header" /></a> <a href="drm_114.html" class="header"><img alt="prev" src="prev.gif" class="header" /></a> <a href="drm_110.html" class="header"><img alt="up" src="up.gif" class="header" /></a> <a href="drm_1.html" class="header"><img alt="top" src="top.gif" class="header" /></a> <a href="drm_2.html" class="header"><img alt="content" src="content.gif" class="header" /></a> <a href="drm_127.html" class="header"><img alt="index" src="index.gif" class="header" /></a></p>
<p class="footer">Copyright Apple Computer, Inc. 1996. Apple&#174; and the Apple logo are registered trademarks of Apple Computer, Inc. Used with permission. All Rights Reserved.</p>
<p class="footer">Generated with <a href="http://www.harlequin.com/webmaker" class="footer">Harlequin WebMaker&#174;</a></p>

</div>
</body>
</html>
