<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<link rel="top" href="drm_1.html" />
<link rel="up" href="drm_110.html" />
<link rel="prev" href="drm_114.html" />
<link rel="next" href="drm_116.html" />
<link title="main style sheet" rel="stylesheet" href="drm.css" type="text/css" />
<title>Function Macros</title>
</head>
<body>

<div class="wm-div-body">
<a name="HEADING115"></a>

<div class="wm-div-headers">
<p class="header"><a href="drm_116.html" class="header"><img alt="next" src="next.gif" class="header" /></a> <a href="drm_114.html" class="header"><img alt="prev" src="prev.gif" class="header" /></a> <a href="drm_110.html" class="header"><img alt="up" src="up.gif" class="header" /></a> <a href="drm_1.html" class="header"><img alt="top" src="top.gif" class="header" /></a> <a href="drm_2.html" class="header"><img alt="content" src="content.gif" class="header" /></a> <a href="drm_127.html" class="header"><img alt="index" src="index.gif" class="header" /></a></p>
<p class="header">14 The Built-In Macros and Special Definitions</p>

</div>
<a name="HEADING115-0"></a>
<a name="UID-Built-In_Macros-5344"></a>
<h1 class="H1.Heading1"> <a name="MARKER-9-2068"></a>Function Macros</h1>
<p class="T1.Text1"><a name="MARKER-2-2069"></a>Function macros provide syntax for assignment and for conditional execution. These three built-in function macros may be called using function-call syntax or operator syntax.</p>
<table class="numbered"><caption class="Tb.Table"><strong>Table 14-4</strong>  Function Macros</caption>
  <tr><th class="primary"><p class="TbH.TblHd"> Macro</p>
    </th><th><p class="TbH.TblHd"> </p>
    </th><th><p class="TbH.TblHd"> Description</p>
    </th><th><p class="TbH.TblHd"> Page</p>
  </th></tr><tr><td><p class="TbT.TblText"> <code class="TbT.TblText">:=</code></p>
    </td><td><p class="TbT.TblText"> </p>
    </td><td><p class="TbT.TblText"> <a href="#MARKER-9-2072" class="TbT.TblText">Stores a new value in a location.</a></p>
    </td><td><p class="TbT.TblText"> <a href="#MARKER-9-2072" class="TbT.TblText">409</a></p>
  </td></tr><tr><td><p class="TbT.TblText"> <code class="TbT.TblText">|</code></p>
    </td><td><p class="TbT.TblText"> </p>
    </td><td><p class="TbT.TblText"> <a href="#MARKER-9-2076" class="TbT.TblText">Returns the value of the first of two operands that is true.</a></p>
    </td><td><p class="TbT.TblText"> <a href="#MARKER-9-2075" class="TbT.TblText">412</a></p>
  </td></tr><tr><td><p class="TbT.TblText"> <code class="TbT.TblText">&amp;</code></p>
    </td><td><p class="TbT.TblText"> </p>
    </td><td><p class="TbT.TblText"> <a href="#MARKER-9-2079" class="TbT.TblText">If the value of a first operand is true, executes a second operand and returns its values.</a></p>
    </td><td><p class="TbT.TblText"> <a href="#MARKER-9-2079" class="TbT.TblText">412</a></p>
</td></tr></table><a name="HEADING115-63"></a>
<a name="UID-Built-In_Macros-5569"></a>
<h2 class="H2.Heading2"> <a name="MARKER-2-2070"></a>Assignment</h2>
<a name="HEADING115-64"></a>
<h3 class="H4.Heading4"> <code class="Code H4.Heading4"><a name="MARKER-2-2071"></a>:=</code> <span class="attributes-summary">[Function Macro]</span></h3>
<hr class="H4.Heading4" />
<p class="SD.ShortDescription"><a name="MARKER-9-2072"></a>Stores a new value in a location.</p>
<dl class="Cliche">
  <dt class="Cliche"><strong class="IMPORTANT Cliche">Macro Call:</strong></dt>
  <dd class="Cliche"><p class="Cliche"> <i class="Parameter Cliche">place<code class="Code Parameter Cliche"> := new-value</code></i></p></dd>
  <dt class="Cliche"><strong class="IMPORTANT Cliche">Arguments:</strong></dt>
  <dd class="Cliche"><p class="Cliche"> <i class="Parameter Cliche">place</i> <code class="BNF Cliche">expression<em class="BNF Cliche"><sub>bnf</sub></em></code></p></dd>
  <dd><dl class="RP.RoutineParam">
      <dt class="RP.RoutineParam"><i class="Parameter RP.RoutineParam">new-value</i></dt>
      <dd class="RP.RoutineParam"><p class="RP.RoutineParam"> <code class="BNF RP.RoutineParam">expression<em class="BNF RP.RoutineParam"><sub>bnf</sub></em></code></p></dd>
  </dl></dd>
  <dt class="Cliche"><strong class="IMPORTANT Cliche">Values:</strong></dt>
  <dd class="Cliche"><p class="Cliche"> <i class="Parameter Cliche">new-value</i>, an instance of <code class="cv Cliche">&lt;object&gt;</code>.</p></dd>
  <dt class="Cliche"><strong class="IMPORTANT Cliche">Description:</strong></dt>
  <dd class="Cliche"><p class="Cliche"> <code class="Code Cliche">:=</code> stores <i class="Parameter Cliche">new-value</i> in <i class="Parameter Cliche">place</i> and returns <i class="Parameter Cliche">new-value</i>.</p>
    <p class="T1.Text1"><i class="Parameter T1.Text1">place</i> may be a variable, a getter function or macro call with a corresponding setter, a slot access, or an element reference.</p>
    <p class="T1.Text1"><i class="Parameter T1.Text1">new-value</i> may be any operand. It is executed, and its value is stored in <i class="Parameter T1.Text1">place</i>.</p>
    <p class="T1.Text1">In all cases, <i class="Parameter T1.Text1">new-value</i> must be an appropriate type for <i class="Parameter T1.Text1">place</i> or an error is signaled.</p>
    <p class="T1.Text1">The <i class="Parameter T1.Text1">new-value</i> of an assignment statement is executed first, followed by the <i class="Parameter T1.Text1">place</i> (assuming the <i class="Parameter T1.Text1">place</i> requires any execution, which will only be true if it is not a binding name).</p>
    <a name="HEADING115-75"></a>
    <h4 class="H5.Heading5"> Assignment to a binding</h4>
    <p class="T1.Text1">If <i class="Parameter T1.Text1">place</i> is a binding name, then <i class="Parameter T1.Text1">new-value</i> is stored in the binding. It is an error if there is no binding corresponding to <i class="Parameter T1.Text1">place</i>. (<code class="Code T1.Text1">:=</code> cannot be used to create bindings, only to change their values.)  An error is also signaled if <i class="Parameter T1.Text1">place</i> is a binding specialized to a type and the <i class="Parameter T1.Text1">new-value</i> is not of that type.</p>
    <pre class="Cv.Code">
define variable *number* = 10;
*number*
<code class="cv Cv.Code"> &rArr;</code>  10
*number* := *number* + 10;
<code class="cv Cv.Code"> &rArr;</code>  20
*number*
<code class="cv Cv.Code"> &rArr;</code>  20 </pre>
    <a name="HEADING115-78"></a>
    <h4 class="H5.Heading5"> Assignment to a function or function macro</h4>
    <p class="T1.Text1">If <i class="Parameter T1.Text1">place</i> has the syntax of a function call, then <code class="Code T1.Text1">:=</code> will invoke the corresponding setter function. Given a binding named <i class="Parameter T1.Text1">fun</i>, the corresponding setter is the binding named <i class="Parameter T1.Text1">fun<code class="cv Parameter T1.Text1">-setter</code></i> in the current environment.</p>
    <p class="T1.Text1"><code class="cv T1.Text1">:=</code> maps <i class="Parameter T1.Text1">place</i> to <i class="Parameter T1.Text1">place<code class="cv Parameter T1.Text1">-setter</code></i> without regard for whether <i class="Parameter T1.Text1">place</i> is a function or a macro. It does not expand a macro call on the left-hand side before determining the setter.</p>
    <p class="T1.Text1">With the exception of the order of execution and a guaranteed return value, the following three expressions are equivalent:</p>
    <pre class="Cv.Code">
*top-view*.subviews := generate-subviews()
subviews(*top-view*) := generate-subviews()
subviews-setter(generate-subviews(), *top-view*) </pre>
    <p class="T1.Text1">(The differences are as follows: the execution time of <code class="cv T1.Text1">subviews-setter</code> is undefined in the first two expressions but defined in the last; the first two expressions will return the value of the call to <code class="cv T1.Text1">generate-subviews</code> while the last will return the value of the call to <code class="cv T1.Text1">subviews-setter</code>.)</p>
    <pre class="Cv.Code">
name(arg1,...argn ) := new-value </pre>
    <p class="T1.Text1">behaves exactly the same as</p>
    <pre class="Cv.Code">
begin
  let <i class="Parameter Cv.Code">temp</i> = new-value;
  name-setter(temp, arg1,...argn );
  <i class="Parameter Cv.Code">temp
</i>end </pre>
    <p class="T1.Text1">This is true regardless of whether <code class="cv T1.Text1">name</code> and <code class="cv T1.Text1">name-setter</code> are functions or macros. Here <i class="Parameter T1.Text1">temp</i> stands for a variable with a unique name. If <code class="cv T1.Text1">name-setter</code> is a macro, it  is responsible for the order of executation of <code class="cv T1.Text1">arg1,...argn</code>.</p>
    <p class="T1.Text1">The same considerations apply to <code class="cv T1.Text1">arg.name := new-value</code>.</p>
    <a name="HEADING115-89"></a>
    <h4 class="H5.Heading5"> Assignment to element references</h4>
    <p class="T1.Text1">Just as <code class="Code T1.Text1">[]</code> can be used as syntax for <code class="Code T1.Text1">element</code> and <code class="Code T1.Text1">aref</code>, <code class="Code T1.Text1">[]</code> and <code class="Code T1.Text1">:=</code> can be used as syntax for <code class="Code T1.Text1">element-setter</code> and <code class="Code T1.Text1">aref-setter</code>. For example, the following three expressions are equivalent:</p>
    <pre class="Cv.Code">
foo[2] := &quot;quux&quot;
element (foo, 2) := &quot;quux&quot;
element-setter (&quot;quux&quot;, foo, 2).<a name="MARKER-2-2073"></a> </pre>
  </dd>
</dl>
<a name="HEADING115-92"></a>
<a name="UID-Built-In_Macros-5614"></a>
<h2 class="H2.Heading2"> Conditional Execution</h2>
<a name="HEADING115-93"></a>
<h3 class="H4.Heading4"> <code class="Code H4.Heading4"><a name="MARKER-2-2074"></a>|</code> <span class="attributes-summary">[Function Macro]</span></h3>
<hr class="H4.Heading4" />
<p class="SD.ShortDescription"><a name="MARKER-9-2075"></a>Returns the value of the first of two operands that is true.<a name="MARKER-9-2076"></a></p>
<dl class="Cliche">
<dt class="Cliche"><strong class="IMPORTANT Cliche">Macro Call:</strong></dt>
<dd class="Cliche"><p class="Cliche"> <i class="Parameter Cliche">one<code class="MetaSyntax Parameter Cliche">  | another</code></i></p></dd>
<dt class="Cliche"><strong class="IMPORTANT Cliche">Arguments:</strong></dt>
<dd class="Cliche"><p class="Cliche"> <i class="Parameter Cliche">one</i> <code class="BNF Cliche">expression<em class="BNF Cliche"><sub>bnf</sub></em></code></p></dd>
<dd><dl class="RP.RoutineParam">
<dt class="RP.RoutineParam"><i class="Parameter RP.RoutineParam">another</i></dt>
<dd class="RP.RoutineParam"><p class="RP.RoutineParam"> <code class="BNF RP.RoutineParam">expression<em class="BNF RP.RoutineParam"><sub>bnf</sub><i class="Parameter BNF RP.RoutineParam"></i></em></code></p></dd>
</dl></dd>
<dt class="Cliche"><strong class="IMPORTANT Cliche">Values:</strong></dt>
<dd class="Cliche"><p class="Cliche"> Zero or more instances of <code class="cv Cliche">&lt;object&gt;</code>.</p></dd>
<dt class="Cliche"><strong class="IMPORTANT Cliche">Description:</strong></dt>
<dd class="Cliche"><p class="Cliche"> <code class="Code Cliche">|</code> (<a name="MARKER-2-2077"></a>logical or) executes <i class="Parameter Cliche">one</i>. If the first value of <i class="Parameter Cliche">one</i> is true, that value is returned and <i class="Parameter Cliche">another</i> is not executed. Otherwise <i class="Parameter Cliche">another</i> is executed and its values are returned.</p></dd>
</dl>
<a name="HEADING115-100"></a>
<h3 class="H4.Heading4"> <code class="Code H4.Heading4"><a name="MARKER-2-2078"></a>&amp;</code>  <span class="attributes-summary">[Function Macro]</span></h3>
<hr class="H4.Heading4" />
<p class="SD.ShortDescription"><a name="MARKER-9-2079"></a>If the value of a first operand is true, executes a second operand and returns its values.</p>
<dl class="Cliche">
<dt class="Cliche"><strong class="IMPORTANT Cliche">Macro Call:</strong></dt>
<dd class="Cliche"><p class="Cliche"> <i class="Parameter Cliche">one<code class="Code Parameter Cliche"> &amp; another</code></i>  &rArr;<strong class="Cliche">  <i class="Parameter Cliche">values</i></strong></p></dd>
<dt class="Cliche"><strong class="IMPORTANT Cliche">Arguments:</strong></dt>
<dd class="Cliche"><p class="Cliche"> <i class="Parameter Cliche">one</i> <code class="BNF Cliche">expression<em class="BNF Cliche"><sub>bnf</sub></em></code></p></dd>
<dd><dl class="RP.RoutineParam">
<dt class="RP.RoutineParam"><i class="Parameter RP.RoutineParam">another</i></dt>
<dd class="RP.RoutineParam"><p class="RP.RoutineParam"> <code class="BNF RP.RoutineParam">expression<em class="BNF RP.RoutineParam"><sub>bnf</sub></em></code></p></dd>
</dl></dd>
<dt class="Cliche"><strong class="IMPORTANT Cliche">Values:</strong></dt>
<dd class="Cliche"><p class="Cliche"> Zero or more instances of <code class="cv Cliche">&lt;object&gt;</code>.</p></dd>
<dt class="Cliche"><strong class="IMPORTANT Cliche">Description:</strong></dt>
<dd class="Cliche"><p class="Cliche"> <code class="Code Cliche">&amp;</code> (<a name="MARKER-2-2080"></a>logical and) executes <i class="Parameter Cliche">one</i>. If the first value returned by <i class="Parameter Cliche">one</i> is false, <code class="Code Cliche">#f</code> is returned and <i class="Parameter Cliche">another</i> is not executed. Otherwise, <i class="Parameter Cliche">another</i> is executed and its values are returned.<a name="MARKER-2-2081"></a></p>
<a name="LINK-Built-In_Macros-lastpage"></a></dd>
</dl>

</div>

<div class="wm-div-footers">

<div class="wm-div-toc">

<ul class="footer">
<li class="footer"><a href="drm_115.html#HEADING115-63" class="footer">Assignment</a></li>
<li class="footer"><a href="drm_115.html#HEADING115-64" class="footer"> := [Function Macro]</a></li>
<li class="footer"><a href="drm_115.html#HEADING115-75" class="footer">Assignment to a binding</a></li>
<li class="footer"><a href="drm_115.html#HEADING115-78" class="footer">Assignment to a function or function macro</a></li>
<li class="footer"><a href="drm_115.html#HEADING115-89" class="footer">Assignment to element references</a></li>
<li class="footer"><a href="drm_115.html#HEADING115-92" class="footer">Conditional Execution</a></li>
<li class="footer"><a href="drm_115.html#HEADING115-93" class="footer">| [Function Macro]</a></li>
<li class="footer"><a href="drm_115.html#HEADING115-100" class="footer">&amp;  [Function Macro]</a></li>
</ul>


</div>

<hr class="footer" />
<address class="footer">The Dylan Reference Manual - 7 Apr 1998</address>
<p class="footer"><a href="drm_116.html" class="header"><img alt="next" src="next.gif" class="header" /></a> <a href="drm_114.html" class="header"><img alt="prev" src="prev.gif" class="header" /></a> <a href="drm_110.html" class="header"><img alt="up" src="up.gif" class="header" /></a> <a href="drm_1.html" class="header"><img alt="top" src="top.gif" class="header" /></a> <a href="drm_2.html" class="header"><img alt="content" src="content.gif" class="header" /></a> <a href="drm_127.html" class="header"><img alt="index" src="index.gif" class="header" /></a></p>
<p class="footer">Copyright Apple Computer, Inc. 1996. Apple&#174; and the Apple logo are registered trademarks of Apple Computer, Inc. Used with permission. All Rights Reserved.</p>
<p class="footer">Generated with <a href="http://www.harlequin.com/webmaker" class="footer">Harlequin WebMaker&#174;</a></p>

</div>
</body>
</html>
