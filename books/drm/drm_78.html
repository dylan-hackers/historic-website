<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  
  <!-- Relative Navigation -->
  
  <link rel="up" href="drm_76.html" />
  <link rel="prev" href="drm_77.html" />
  <link rel="next" href="drm_79.html" />
  
  <!-- Absolute Navigation -->
  
  <link rel="top" href="drm_1.html" />
  <link rel="start first" href="index.html" />
  <link rel="contents" href="drm_2.html" />
  <link rel="copyright" href="drm_3.html" />
  <link rel="glossary" href="drm_126.html" />
  <link rel="index" href="drm_127.html" />
  <link rel="last author" href="drm_128.html" />
  
  <!-- Chapters -->
  
  <link rel="chapter" title="About This Book" href="drm_4.html" />
  <link rel="chapter" title="1 Introduction" href="drm_5.html" />
  <link rel="chapter" title="2 Syntax" href="drm_9.html" />
  <link rel="chapter" title="3 Program Structure" href="drm_25.html" />
  <link rel="chapter" title="4 Program Control" href="drm_28.html" />
  <link rel="chapter" title="5 Types and Classes" href="drm_38.html" />
  <link rel="chapter" title="6 Functions" href="drm_47.html" />
  <link rel="chapter" title="7 Conditions" href="drm_52.html" />
  <link rel="chapter" title="8 Collections" href="drm_59.html" />
  <link rel="chapter" title="9 Sealing" href="drm_70.html" />
  <link rel="chapter" title="10 Macros" href="drm_76.html" />
  <link rel="chapter" title="11 The Built-In Classes" href="drm_87.html" />
  <link rel="chapter" title="12 The Built-In Functions" href="drm_96.html" />
  <link rel="chapter" title="13 Other Built-In Objects" href="drm_108.html" />
  <link rel="chapter" title="14 The Built-In Macros and Special Definitions" href="drm_110.html" />
  
  <!-- Appendices -->
  
  <link rel="appendix" title="A BNF" href="drm_116.html" />
  <link rel="appendix" title="B Exported Names" href="drm_119.html" />
  
  <!-- Stylesheet -->
  
  <link title="main style sheet" rel="stylesheet" href="drm.css" type="text/css" />

  <title>The Dylan Reference Manual: Extensible Grammar</title>
</head>
<body>

<div class="wm-div-body">
<a name="HEADING78"></a>

<div class="wm-div-headers">
<p id="navigation"><a href="drm_77.html"><img alt="prev" src="prev.gif" title="Go to previous page" /></a> <a href="drm_79.html"><img alt="next" src="next.gif" title="Go to next page" /></a> <a href="drm_76.html"><img alt="up" src="up.gif" /></a> <a href="drm_1.html"><img alt="top" src="top.gif" /></a> <a href="drm_2.html"><img alt="Contents" src="content.gif" /></a> <a href="drm_127.html"><img alt="index" src="index.gif" /></a></p>

<div id="section-header">
  <p id="section-prefix">Chapter 10</p>
  <p id="section-name">Macros</p>
</div>

<div class="wm-div-toc">
  <ul class="page-toc">
    <li class="footer"><a href="drm_78.html#HEADING78-2" class="footer">Definition Macros</a></li>
    <li class="footer"><a href="drm_78.html#HEADING78-9" class="footer">Statement Macros</a></li>
    <li class="footer"><a href="drm_78.html#HEADING78-13" class="footer">Function Macros</a></li>
  </ul>
</div>

<hr />

</div>

<a name="HEADING78-0"></a>
<a name="UID-Macros-1543"></a>
<h1 class="H1.Heading1">Extensible Grammar</h1>
<p class="T1.Text1"><a name="MARKER-2-1210"></a><a name="MARKER-2-1211"></a>There are three kinds of macros: definition macros, which extend the available set of definitions; <a name="MARKER-2-1212"></a>statement macros, which extend the available set of statements; and <a name="MARKER-2-1213"></a>function macros, which syntactically resemble function calls but are more flexible. <a name="MARKER-2-1214"></a>Named value references and <a name="MARKER-2-1215"></a>local declarations cannot be macro calls. Only statements, function calls, and definitions are extensible.</p>
<a name="HEADING78-2"></a>
<a name="UID-Macros-1546"></a>
<h2 class="H2.Heading2">Definition Macros</h2>
<p class="T1.Text1"><a name="MARKER-2-1216"></a>A definition macro extends the <var>definition-macro-call </var>production of the Dylan phrase grammar to recognize additional constructs as valid definitions, by creating a new <em class="BNFCaps T1.Text1">define-body-word</em> that is recognized by the following grammar line:</p>
<div class="BNF">
  <dl>
    <dt><var>definition-macro-call:</var></dt>
    <dd><code>define</code> <i class="T1.Text1">modifiers<em class="Subscript italics T1.Text1"><sub>opt</sub></em></i> <em class="BNFCaps T1.Text1">define-body-word</em> <i class="T1.Text1">body-fragment<em class="Subscript italics T1.Text1"><sub>opt</sub></em></i> <var>definition-tail</var></dd>
  </dl>
</div>
<p class="T1.Text1">or by creating a new <em class="BNFCaps T1.Text1">define-list-word</em> that is recognized by the following grammar line:</p>
<div class="BNF">
  <dl>
    <dt><var>definition-macro-call:</var></dt>
    <dd><code>define</code> <i class="T1.Text1">modifiers<em class="Subscript italics T1.Text1"><sub>opt</sub></em></i> <em class="BNFCaps T1.Text1">define-list-word</em> <i class="T1.Text1">list-fragment<em class="Subscript italics T1.Text1"><sub>opt</sub></em></i></dd>
  </dl>
</div>
<p class="T1.Text1">This allows programmers to extend Dylan by defining new kinds of definitions. The syntax of the definition must be parseable by one of these two predefined grammar rules. The first handles body-style definitions like <code>define class</code>, <code>define method</code>, and <code>define module</code>,  while the second handles list-style definitions like <code>define constant</code>. See <a href="drm_116.html" class="T1.Text1">Appendix A, "BNF,"</a> for the details.</p>
<p class="T1.Text1">The new <em class="BNFCaps T1.Text1">define-body-word</em> or <em class="BNFCaps T1.Text1">define-list-word</em> becomes a partially reserved word in each module where the macro definition is visible. In particular a <em class="BNFCaps T1.Text1">define-body-word</em> or <em class="BNFCaps T1.Text1">define-list-word</em> cannot be used as a modifier in a definition. It can still be used as a variable-name.<a name="MARKER-2-1217"></a></p>
<a name="HEADING78-9"></a>
<a name="UID-Macros-1562"></a>
<h2 class="H2.Heading2">Statement Macros</h2>
<p class="T1.Text1"><a name="MARKER-2-1218"></a>A statement macro extends the <var>statement</var> production of the Dylan phrase grammar to recognize additional constructs as valid statements by creating a new <em class="BNFCaps T1.Text1">begin-word</em> that is recognized by the following grammar line:</p>
<div class="BNF">
  <dl>
    <dt><var>statement:</var></dt>
    <dd>
      <p><em class="BNFCaps T1.Text1">begin-word</em> <i class="T1.Text1">body-fragment<em class="Subscript italics T1.Text1"><sub>opt</sub></em></i> <var>end-clause</var></p>
    </dd>
  </dl>
</div>
<p class="T1.Text1">The new <em class="BNFCaps T1.Text1">begin-word</em> becomes a reserved word in each module where the macro definition is visible. It can only be used at the beginning and end of this new statement.<a name="MARKER-2-1219"></a></p>
<a name="HEADING78-13"></a>
<a name="UID-Macros-1569"></a>
<h2 class="H2.Heading2">Function Macros</h2>
<p class="T1.Text1"><a name="MARKER-2-1220"></a>A function macro extends the <var>function-macro-call </var>production of the Dylan phrase grammar to recognize additional constructs by creating a new <em class="BNFCaps T1.Text1">function-word</em> that is recognized by the following grammar line:</p>
<div class="BNF">
  <dl>
    <dt><var>function-macro-call:</var></dt>
    <dd>
      <p><em class="BNFCaps T1.Text1">function-word</em> <code>(</code> <i class="T1.Text1">body-fragment<em class="Subscript italics T1.Text1"><sub>opt</sub></em></i> <code>)</code></p>
    </dd>
  </dl>
</div>
<p class="T1.Text1">In addition, a function macro can be invoked by any of the shorthand syntax constructs available for invoking functions. In this case, the arguments are always parsed expression fragments, as described on <a href="drm_77.html#MARKER-9-1199" class="T1.Text1">page 146</a>.</p>
<p class="T1.Text1">The new <em class="BNFCaps T1.Text1">function-word</em> becomes a reserved word in each module where the macro definition is visible. It can only be used at the beginning of a macro call.<a name="MARKER-2-1221"></a><a name="MARKER-2-1222"></a></p>

</div>

<div class="wm-div-footers">

<hr class="footer" />
<address class="footer">The Dylan Reference Manual - 7 Apr 1998</address>
<p class="footer"><a href="drm_77.html"><img alt="prev" src="prev.gif" title="Go to previous page" /></a> <a href="drm_79.html"><img alt="next" src="next.gif" title="Go to next page" /></a> <a href="drm_76.html"><img alt="up" src="up.gif" /></a> <a href="drm_1.html"><img alt="top" src="top.gif" /></a> <a href="drm_2.html"><img alt="Contents" src="content.gif" /></a> <a href="drm_127.html"><img alt="index" src="index.gif" /></a></p>
<p class="footer">Copyright Apple Computer, Inc. 1996. Apple&#174; and the Apple logo are registered trademarks of Apple Computer, Inc. Used with permission. All Rights Reserved.</p>
<p class="footer">Generated with <a href="http://www.harlequin.com/webmaker" class="footer">Harlequin WebMaker&#174;</a></p>

</div>
</body>
</html>
