<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>A Simple Example</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet version 1.13"><LINK
REL="HOME"
TITLE="Gwydion Dylan Library Reference Guide"
HREF="gdlibs.html"><LINK
REL="UP"
TITLE="The Parse-Arguments Library"
HREF="libs-parse-arguments.html"><LINK
REL="PREVIOUS"
TITLE="Terminology"
HREF="libs-parse-arguments-terminology.html"><LINK
REL="NEXT"
TITLE="Standard Option Types"
HREF="libs-parse-arguments-option-parsers.html"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Gwydion Dylan Library Reference Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="libs-parse-arguments-terminology.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 16. The Parse-Arguments Library</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="libs-parse-arguments-option-parsers.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="LIBS-PARSE-ARGUMENTS-EXAMPLE"
>A Simple Example</A
></H1
><P
><A
HREF="libs-parse-arguments-example.html#LIBS-PARSE-ARGUMENTS-EXAMPLE-LIBRARY"
>Figure 16-2</A
> and <A
HREF="libs-parse-arguments-example.html#LIBS-PARSE-ARGUMENTS-EXAMPLE-SOURCE"
>Figure 16-3</A
> demonstrate how to use
      the parse-arguments library in a simple application.</P
><DIV
CLASS="FIGURE"
><P
><B
><A
NAME="LIBS-PARSE-ARGUMENTS-EXAMPLE-LIBRARY"
>Figure 16-2. Library declaration for a sample application using
	parse-arguments.</A
></B
></P
><PRE
CLASS="PROGRAMLISTING"
>Module: dylan-user

define library sample-application
  use dylan;
  use format-out;
  use parse-arguments;
end library;

define module sample-application
  use dylan;
  use extensions;
  use format-out;
  use parse-arguments;
end module;</PRE
></DIV
><DIV
CLASS="FIGURE"
><P
><B
><A
NAME="LIBS-PARSE-ARGUMENTS-EXAMPLE-SOURCE"
>Figure 16-3. Source code for a sample application using
	parse-arguments.</A
></B
></P
><PRE
CLASS="PROGRAMLISTING"
>Module: sample-application

define method main(program-name :: &#60;string&#62;, #rest arguments)
  let parser = make(&#60;argument-list-parser&#62;);
  add-option-parser-by-type(parser,
                            &#60;simple-option-parser&#62;,
                            long-options: #("verbose"),
                            short-options: #("v"));
  add-option-parser-by-type(parser,
                            &#60;parameter-option-parser&#62;,
                            long-options: #("logfile"),
                            short-options: #("L"));

  unless (parse-arguments(parser, arguments))
    format-out("Usage: sample-application [-v] [-Llogfile] files...\n");
    exit(exit-code: 1);
  end;

  let verbose? = option-value-by-long-name(parser, "verbose");
  let logfile = option-value-by-long-name(parser, "logfile");
  let file-names = parser.regular-arguments;

  // Body of program.
end;</PRE
></DIV
><P
>In <A
HREF="libs-parse-arguments-example.html#LIBS-PARSE-ARGUMENTS-EXAMPLE-SOURCE"
>Figure 16-3</A
>, the
      variable <FONT
COLOR="GREEN"
><CODE
>verbose?</CODE
></FONT
> will be set to <FONT
COLOR="GREEN"
><CODE
>#t</CODE
></FONT
> if
      either <TT
CLASS="LITERAL"
>--verbose</TT
> or <TT
CLASS="LITERAL"
>-v</TT
> appears
      on the command line. Otherwise, it will be set to
      <FONT
COLOR="GREEN"
><CODE
>#f</CODE
></FONT
>. Similarly, if <TT
CLASS="LITERAL"
>-Lfilename</TT
> or
      <TT
CLASS="LITERAL"
>--logfile=filename</TT
> appears on the command line,
      the variable <FONT
COLOR="GREEN"
><CODE
>logfile</CODE
></FONT
> will be set the string
      <TT
CLASS="LITERAL"
>"filename"</TT
>. Otherwise, it too will be set to
      <FONT
COLOR="GREEN"
><CODE
>#f</CODE
></FONT
>.</P
><P
>Any other arguments will be collected and placed in the
      variable <FONT
COLOR="GREEN"
><CODE
>file-names</CODE
></FONT
>.</P
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="libs-parse-arguments-terminology.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="gdlibs.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="libs-parse-arguments-option-parsers.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Terminology</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="libs-parse-arguments.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Standard Option Types</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>