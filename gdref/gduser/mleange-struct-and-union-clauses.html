<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Struct and Union Clauses</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet version 1.13"><LINK
REL="HOME"
TITLE="Gwydion Dylan User's Guide"
HREF="gduser.html"><LINK
REL="UP"
TITLE="Using the Melange Interface Generator"
HREF="melange.html"><LINK
REL="PREVIOUS"
TITLE="Function Clauses"
HREF="melange-function-classes.html"><LINK
REL="NEXT"
TITLE="Pointer Clauses"
HREF="pointer-clauses.html"></HEAD
><BODY
BGCOLOR="#FFFFFF"
TEXT="#000000"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Gwydion Dylan User's Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="melange-function-classes.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 5. Using the Melange Interface Generator</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="pointer-clauses.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="MLEANGE-STRUCT-AND-UNION-CLAUSES"
>Struct and Union Clauses</A
></H1
><P
>"Struct clauses" and "union clauses" (referred to
      collectively as "container clauses") are used to specify naming
      in inclusion of class slots in exactly the same way that the
      options in the file clause control the handling of global
      definitions. Like the function clauses described above, they
      consist of the reserved word "struct" or "union", a string which
      gives the full C name of the container declaration, an optional
      renaming, and a list of options. If we have a structure defined
      by</P
><PRE
CLASS="PROGRAMLISTING"
>typedef struct cons {
   int index;
   struct object *head;
   struct cons *tail;
} cons_cell;</PRE
><P
>we could use the following interface definition:</P
><PRE
CLASS="PROGRAMLISTING"
>define interface
   #include "cons.h";
   struct "struct cons" =&#62; &#60;c-list&#62;,
      superclasses: {&#60;sequence&#62;},
      prefix: "c-list-",
      name-mapper: identity-name-mapping,
      exclude: {"index"};
end interface;</PRE
><P
>Valid options for container clauses include: import:,
      prefix:, exclude:, rename:, seal-functions:, read-only:,
      equate:, and map:.These options act like the equivalent options
      which may be specified in a file clause, but they apply to the
      slots of a single "class" rather than to globally defined
      objects. Options specified within a container clause override
      any global defaults that might have been specified in the
      "#include" clause.  Container clauses also permit the
      "superclasses:" option described in <A
HREF="melage-type-definitions.html#MELANGE-CLASS-INHERITANCE"
>the section called <I
>Specifying class inheritance</I
></A
>.  Although the recommended
      method for specifying a container type is to use the full C name
      (i.e. "struct foo"), you may also use an alias defined by a
      typedef. Thus, in the above example, you could have specified
      either "struct cons" or "cons_cell", with identical
      results.</P
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="melange-function-classes.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="gduser.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="pointer-clauses.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Function Clauses</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="melange.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Pointer Clauses</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>